(function(e){function t(t){for(var r,o,i=t[0],l=t[1],c=t[2],u=0,m=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={app:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var d=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"035b":function(e,t,a){"use strict";a("f4da")},"0762":function(e,t,a){},"0a70":function(e,t,a){},1405:function(e,t,a){},"1ba9":function(e,t,a){"use strict";a("3905")},2169:function(e,t,a){"use strict";a("8d0e")},3310:function(e,t,a){},3905:function(e,t,a){},"39d2":function(e,t,a){"use strict";a("3aa1")},"3aa1":function(e,t,a){},"3e30":function(e,t,a){},4477:function(e,t,a){},"48b2":function(e,t,a){"use strict";a("6dd2")},"56d7":function(e,t,a){"use strict";a.r(t);var r=a("2b0e"),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},s=[],o=(a("6e3e"),a("2877")),i={},l=Object(o["a"])(i,n,s,!1,null,null,null),c=l.exports,d=a("9483");Object(d["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var u=a("8c4f"),m=function(){var e=this,t=e._self._c;return t("div",[e.islock?t("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"店小秘",name:"first"}},[t("Sys4Home")],1)],1):t("Lock",{on:{login:e.login}})],1)},p=[],b=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home"},[t("div",{staticClass:"box"},[t("div",{staticClass:"btns-main"},[t("span",{staticClass:"margin-ri"},[e._v("订单总条数："+e._s(e.orderAllNum)+";")]),t("span",{staticClass:"margin-ri"},[e._v("衣服总件数："+e._s(e.goodsAllNum))])]),t("div",{staticClass:"btns"},e._l(e.downBtn,(function(a,r){var n;return t("span",{key:a.key,staticClass:"btns-item"},[t("span",{staticClass:"num margin-bot-4"},[e._v("订单个数："+e._s(e.orderArrsDatas&&(null===(n=e.orderArrsDatas[a.id])||void 0===n?void 0:n.length)||0))]),t("span",{staticClass:"mar-bot"},[t("download-excel",{ref:"download-img"+r,refInFor:!0,class:["export-img"],attrs:{data:e.imgExportData[a.id]||[],name:e.fileName+"图片-"+a.value+e.timer+".xls"}},[e._v("img")])],1),t("span",{staticClass:"margin-bot-4"},[t("download-excel",{ref:"download"+r,refInFor:!0,class:["export",a.class],attrs:{data:e.specExportData[a.id]||[],name:e.fileName+a.value+"-"+e.timer+".xls"}},[e._v(" "+e._s(a.value)+" ")])],1),t("div",{staticClass:"mar-bot0"},[t("el-input",{staticStyle:{width:"80px"},attrs:{size:"small",placeholder:"开始索引,默认1"},model:{value:e.allIndex[a.id],callback:function(t){e.$set(e.allIndex,a.id,t)},expression:"allIndex[item.id]"}})],1)])})),0),t("p",{staticClass:"box-info"},[t("span",{staticClass:"zonglan"},[t("el-button",{attrs:{type:"info"},on:{click:e.exportOrder}},[e._v("全部单号汇总")]),t("el-button",{staticClass:"all-btn",attrs:{type:"success"},on:{click:e.handleBox}},[e._v("条件汇总")])],1),t("span",[t("span",{staticClass:"api-text"},[e._v("name：")]),t("span",{staticClass:"input-span"},[t("el-input",{attrs:{size:"small",placeholder:"请输入文件名"},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}})],1)]),e.isOrderPage?e._e():t("router-link",{attrs:{to:"order?type=2",target:"_blank"}},[e._v("旧版规格")]),e.isOrderPage?e._e():t("router-link",{attrs:{to:"order?type=1",target:"_blank"}},[e._v("其他店")])],1)]),t("div",{staticClass:"form"},[t("Empty",{ref:"empty",on:{save:e.save,scrollTop:e.scrollTop}})],1),t("Box",{attrs:{dialogVisible:e.boxVisible},on:{onOk:function(t){e.boxVisible=!1},onCancel:function(t){e.boxVisible=!1}}})],1)},h=[],g=function(){var e=this,t=e._self._c;return t("el-form",{ref:"formData",staticClass:"demo-dynamic",attrs:{model:e.formData,"label-width":"100px"}},[t("div",{staticClass:"block-btn"},[t("div",{staticClass:"txtz"},[t("div",{staticStyle:{"margin-bottom":"6px"}},[t("span",{staticClass:"api-text"},[e._v("A-")]),t("span",[e._v("get_package_list")])]),t("div",[t("span",{staticClass:"api-text"},[e._v("Aa-")]),t("span",[e._v("get_shipment_order_list_by_order_ids_multi_shop")])])]),t("el-button",{staticClass:"maring-ri-16 main-btn",attrs:{type:"danger"},on:{click:function(t){return e.submitForm("formData")}}},[e._v("转化数据")]),t("el-button",{staticClass:"maring-ri-16",attrs:{type:"primary"},on:{click:e.addNextPage}},[e._v("新增下一页")]),t("el-button",{on:{click:function(t){return e.resetForm("formData")}}},[e._v("清空全部数据")])],1),t("div",{staticClass:"content"},e._l(e.formData.group,(function(a,r){return t("div",{key:r,staticClass:"block-row maring-bot-16"},[t("el-form-item",{staticClass:"parent-item",attrs:{label:"Aa",prop:`group.${r}.parent`,rules:[{required:!0,message:`请输入第${e.page_number}页的父`}]}},[t("el-input",{attrs:{type:"textarea",rows:2},model:{value:a.parent,callback:function(t){e.$set(a,"parent",t)},expression:"group.parent"}})],1),e._l(a.childs,(function(a,n){return t("el-form-item",{key:a.key,attrs:{label:"Ba"+(n+1),prop:"group."+r+".childs."+n+".value",rules:{required:!1,message:"Ba不能为空",trigger:"blur"}}},[t("div",{staticClass:"item"},[t("el-input",{staticClass:"maring-ri-16 pointer",attrs:{rows:3,type:"textarea"},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"child.value"}}),t("el-button",{on:{click:function(t){return t.preventDefault(),e.removeChild(r,a)}}},[e._v("删除这条")])],1)])})),t("el-form-item",{staticClass:"btns-item"},[e._v(" 第 "),t("span",{staticClass:"block-row-page"},[e._v(e._s(r+1))]),e._v(" 页数据： "),t("el-button",{staticClass:"maring-ri-16",attrs:{size:"medium",type:"warning"},on:{click:function(t){return e.addChild(r)}}},[e._v("新增一条Ba")]),t("el-button",{attrs:{size:"small",type:"info"},on:{click:function(t){return t.preventDefault(),e.clearCurPage(r)}}},[e._v("清空这页数据")]),t("el-button",{attrs:{size:"small"},on:{click:function(t){return t.preventDefault(),e.removeOnePage(r)}}},[e._v("删除这页数据")]),t("span",{staticClass:"child-num"},[e._v("已录Ba数："+e._s(a.childs.length))])],1)],2)})),0)])},f=[],_=(a("14d9"),a("2ef0"));const y=[{value:"",key:Date.now()+1},{value:"",key:Date.now()+2},{value:"",key:Date.now()+3},{value:"",key:Date.now()+4},{value:"",key:Date.now()+5},{value:"",key:Date.now()+6},{value:"",key:Date.now()+7},{value:"",key:Date.now()+8}];var v={data(){return{page_number:1,formData:{group:[{parent:"",childs:Object(_["cloneDeep"])(y)}]}}},methods:{addNextPage(){this.$emit("scrollTop"),this.formData.group.push({parent:"",childs:Object(_["cloneDeep"])(y),key:Date.now()})},removeOnePage(e){const{group:t}=this.formData;t.splice(e,1)},clearCurPage(e){const{group:t}=this.formData;t[e].parent="",t[e].childs=[]},submitForm(e){this.$refs[e].validate(e=>{if(!e)return console.log("error submit!!"),!1;{const e=this.getLastOrderNum()||"";this.$emit("save",{data:JSON.parse(JSON.stringify(this.formData)),lastOrderNum:e})}})},resetForm(e){window.__shop_save_datas={fileName:"",timer:"",dataSource:[],allOrder_sn:[]},this.$refs[e].resetFields()},removeChild(e,t){const{group:a}=this.formData;var r=a[e].childs.indexOf(t);-1!==r&&a[e].childs.splice(r,1)},addChild(e){const{group:t}=this.formData,a=t[e].childs.length;a>7&&alert("一页最多8个Ba，小心仔细检查是否录重复页了"),t[e].childs.push({value:"",key:Date.now()})},getLastOrderNum(){const e=this.page_number-1,t=this.getGroup(e),a=Object(_["get"])(t,"data.package_list"),r=a.length,n=a[r-1],s=Object(_["get"])(n,"order_sn");return s},getGroup(e){const{group:t}=this.formData,a=t[e].parent,r=JSON.parse(a);return r}}},x=v,S=(a("9e78"),Object(o["a"])(x,g,f,!1,null,"7826a09c",null)),D=S.exports;const O=[{id:"spec007",key:"sameBuyer",value:"同个买家下多个单",class:"export-extra"},{id:"specCancel",key:"cancelOrder",value:"申请取消的单"},{id:"spec009",key:"priceOut",value:"大于R$230的单"}],C=[{id:"spec000",key:"sem nome e número",value:"不定制"},{id:"spec001",key:"sem nome e número(copa patch)",value:"不定制+补丁"},{id:"spec002",key:"10#NEYMAR JR",value:"球星号"},{id:"spec003",key:"10#NEYMAR JR(copa patch)",value:"球星号+补丁"},{id:"spec004",key:"Com nome e número",value:"定制名称号码"},{id:"spec005",key:"Com nome e número(copa patch)",value:"定制名称号码+补丁"},{id:"spec0012",key:"Nome+número",value:"旧：定制名字+号码",class:"export-extra"}],w=[{id:"spec008",key:"otherOrder",value:"人工审核单",class:"export-extra"},...O],k=[...C,...w],A=[{id:"spec0011",key:"Sem nome",value:"没有名字"},{id:"spec0012",key:"Nome+número",value:"名字+号码"},{id:"spec0013",key:"Não nome",value:"没名字+号码"}],E=[...A,...w],z=[{id:"spec000",key:"sem nome e número",value:"不定制的单"},{id:"spec111",key:"qiuxinghaoOrder",value:"球星号+补丁"},{id:"spec222",key:"nameNumOrder",value:"姓名+号码+补丁"}],j=[...z,...w],N=["S","M","L","XL","XXL","12","14","16","18","20","22","24","26","28"],$=[...N],I=()=>{const e=window.location.href,t=e.indexOf("type=1"),a=e.indexOf("type=2");let r="",n=[];return t>0?(n=A,r="order"):a>0?(n=C,r="old"):(n=z,r="new"),{which_spec:n,curPage:r}},L=()=>{const e=new Date;let t=e.getMonth()+1+"月"+e.getDate()+"日"+e.getHours()+"时"+e.getMinutes()+"分";return t},R=()=>{const e=new Date,t=e.getMonth()+1,a=t<10?"0"+t:t;let r=e.getFullYear()+"-"+a+"-"+e.getDate();return r},T=(e,t)=>{const a=[];return e.map(e=>{e[t]&&a.push(e[t])}),a},B=()=>{const e="#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0");return e},P=e=>{const t=e.item_model.name,a=t.split(","),r={spec:a[0]};return a.length>1&&(r.size=a[1]),r},U=e=>{const t=e.split(","),a={spec:t[0]};return t.length>1&&(a.size=t[1]),a},X=e=>{if(!e)return"没码数";let t=[];const a=e.indexOf("="),r=e.indexOf("（"),n=e.indexOf("(");return t=-1!==a?e.split("="):-1!==r?e.split("（"):-1!==n?e.split("("):e.split(),t[0]},J=I();let M=J.curPage,F=J.which_spec;const V=230,K=(e,t="orders")=>{let a=[];return e.map(e=>{const r=e.data[t];a=a.concat(r)}),a},q=({userBuyMore:e,userBuyOnce:t,item:a,obj:r})=>{const n=Object(_["find"])(t,["user_id",a.user_id]);if(n){e.push(r);const n=Object(_["findIndex"])(t,["user_id",a.user_id]);e.push(t[n]),t.splice(n,1)}else t.push(r);return{userBuyOnce:t,userBuyMore:e}},H=(e,t,a)=>{const r=Object(_["findIndex"])(F,["key",t]);if(-1!==r){const t=F[r].id;e[t].push(a)}else e["spec008"].push(a)},G=(e,t,a)=>{if("sem nome e número(copa patch)"===t||"Sem nome número(copa patch)"===t||"10#NEYMAR JR"===t||"10#NEYMAR JR(copa patch)"===t)e["spec111"].push(a);else if("Com nome e número"===t||"Com nome e número(copa patch)"===t||"Nome+número"===t||"Com nome número(copa patch)"===t||"Sem nome e número+Brasileirão"===t||"Sem nome e número+Libertadores"===t||"Com nome e número+Brasileirão"===t||"Com nome e número+Libertadores"===t)e["spec222"].push(a);else{const r=Object(_["findIndex"])(F,["key",t]);if(-1!==r){const t=F[r].id;e[t].push(a)}else e["spec008"].push(a)}},Z=(e,t)=>{const a=Object(_["uniq"])(e);console.log(t,"---datas");const r=[];return a.map(e=>{t.map(t=>{e===t.buyer_user.user_id&&(console.log(t.buyer_user.user_id),r.push(t))})}),r},W=({item:e,specArrsDatas:t})=>{const{order_items:a,order_sn:r}=e;let n=!0,s="";for(let o=0;o<a.length;o++){const{bundle_deal_model:e,item_list:t}=a[o];if(t.length>0)for(let a=0;a<t.length;a++){const t=U(e[a].name),r=t.spec;if(s){if(s!==r){n=!1;break}}else s=r}else{const e=P(a[o]).spec;if(s){if(s!==e){n=!1;break}}else s=e}if(!1===n)break}n?"new"===M?G(t,s,e):H(t,s,e):t["spec008"].push(e)},Y=window.location.href,Q=Y.indexOf("type=1"),ee=Y.indexOf("type=2"),te=Q>0?E:ee>0?k:j;let ae=[],re=[],ne=[],se=[],oe=[],ie=[],le=[],ce=[],de=[],ue={};const me=()=>{te.map(e=>{ue[""+e.id]=[]})},pe=()=>{ae=[],ne=[],re=[],se=[],oe=[],ie=[],le=[],de=[],ce=[],ue={},me()},be=e=>{ae=Object(_["cloneDeep"])(e);let t=[],a=[];e.map(e=>{const r=JSON.parse(e.parent);t.push(r),e.childs.map(e=>{a.push(JSON.parse(e.value))})});const r=K(t,"package_list"),n=K(a,"orders");re=Object(_["uniqBy"])(r,"order_sn"),ne=Object(_["uniqBy"])(n,"order_sn")},he=e=>{e.map(e=>{const t={parcel_price:e.parcel_price,order_sn:e.order_sn,user_id:e.user_id};parseFloat(e.parcel_price)>V?se.push(t):oe.push(t);q({userBuyMore:le,userBuyOnce:ie,obj:t,item:e})}),ce=T(ie,"user_id"),de=T(le,"user_id")},ge=(e,t)=>{const a=[];e.map(e=>{a.push(e.order_sn);const r=Object(_["findIndex"])(t,["order_sn",e.order_sn]);-1!==r&&(t[r].user_id=Object(_["get"])(e,"buyer_user.user_id"))}),window["__shop_save_datas"]={allOrder_sn:a},he(re)},fe=e=>{ge(e,re);const t=[];e.map(e=>{const a=Object(_["findIndex"])(se,["order_sn",e.order_sn]),r=Object(_["findIndex"])(le,["order_sn",e.order_sn]);-1!==a?ue["spec009"].push(e):16===e.status_ext?ue["specCancel"].push(e):-1!==r?t.push(e):W({item:e,specArrsDatas:ue})}),ue["spec007"]=Z(de,t),console.log(ue,"=======源数据规格转化完成数据")},_e=({arrs:e})=>{pe(),be(e),fe(ne);const t=Object(_["cloneDeep"])(ue);return t},ye="<table>\n<tr >\n    <td></td>\n    </table>",ve='<table  align="center" >\n<colgroup>\n    <col span="1"style="">\n  </colgroup>\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n</table>'+ye,xe=e=>{const t=R();return`<table border="1"  align="center" >\n    <colgroup>\n        <col span="1"style="">\n      </colgroup>\n    <tr align="center" valign="center">\n        <td  height=200 width=200 align="center" valign="center"  style="color:#fd0004;font-size: 72px;">${e}</td>\n    </tr>\n    <tr align="center">\n        <td>买家（${t}）</td>\n    </tr>\n    <tr align="center">\n        <td  >名字</td>\n    </tr>\n    <tr align="center">\n        <td>号码</td>\n    </tr>\n    <tr align="center">\n        <td>规格</td>\n    </tr>\n    <tr align="center">\n        <td>尺寸</td>\n    </tr>\n    <tr align="center">\n        <td>订单号</td>\n    </tr>\n    <tr align="center">\n    <td>备注</td>\n</tr>\n</table>`},Se=({img:e,spec:t,business:a,buyName:r,number:n,sizeAndNum:s,order_sn:o,bgColor:i})=>`<table border="1"  align="center"  bgcolor="#e5e9f2">\n        <colgroup>\n            <col span="1"style="">\n          </colgroup>\n        <tr align="center" valign="center">\n            <td  height=200 width=200 align="center" valign="center"> <img src="${e}" height="100" /></td>\n        </tr>\n       \n        <tr align="center">\n            <td  style="background-color:${i}">${a}</td>\n        </tr>\n        <tr align="center">\n            <td  >${r}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:green">${n}</td>\n        </tr>\n        <tr align="center">\n            <td >${t}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:red">${s}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:blue">${o}</td>\n        </tr>\n        <tr align="center">\n        <td></td>\n    </tr>\n    </table>`,De=({img:e,specStr:t})=>`<table border="1"  align="center" bgcolor="#e5e9f2">  \n    <tr align="center" valign="center">\n        <td  height=200 width=200 align="center" valign="center"> <img src="${e}" width="100" height="100" /></td>\n    </tr>\n    <tr align="center">\n        <td width="200">${t}</td>\n    </tr>       \n</table>`,Oe='<table  align="center" >\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n</table>'+ye,Ce=e=>{const t=Ae(e),a=ke(t),r=we(a);return r},we=e=>{const t=Object(_["chunk"])(e,4),a=[];return t.map(e=>{let t={};e.map((e,a)=>{t["picture-picture-picture"+a]=De(e),t[`empty${a}-`]=Oe}),a.push(t)}),a},ke=e=>{const t=e.map(e=>{const{specNum:t}=e,a=Object(_["cloneDeep"])(t);let r=[];return $.map((e,t)=>{a.map((t,n)=>{const s=X(t.size);s===e&&(r.push(t),a.splice(n,1))})}),r=r.concat(a),e._specNum=r,e});return console.log(t,"---排序后"),t.map(e=>{const t=Object(_["map"])(e._specNum,"size_num_str").join("/");return{...e,specStr:t}})},Ae=e=>{const t=[];return e.map(e=>{const a=e.imgId,r=Object(_["findIndex"])(t,["imgId",a]),n=e.sizeAndNum;if(-1===r){const e=ze(n,1),r={imgId:a,img:`https://s-cf-br.shopeesz.com/file/${a}_tn`,specNum:[e]};t.push(r)}else Ee(t[r],n)}),t},Ee=(e,t)=>{const{specNum:a}=e,r=Object(_["findIndex"])(a,["size",t]);if(-1===r){const e=ze(t,1);a.push(e)}else{const e=a[r].num+1;a[r].num=e,a[r].size_num_str=t+e}},ze=(e,t)=>({size:e,num:1,size_num_str:e+t}),je=({arrDatas:e,key:t,defineIndex:a})=>{const r=$e(e,t),n=Ne(r.arr,a),s=Ce(r.arr);return{defineIndex:n.defineIndex,tableArrs:n.arr,goodsImgNum:r.goodsImgNum,imgExportData:s}},Ne=(e,t)=>{const a=Object(_["chunk"])(e,4),r=[];return a.map((e,a)=>{let n={left:xe(t)};e.map((e,t)=>{n["data"+t]=Se(e),n[`empty${t}-`]=ve}),r.push(n),t++}),{arr:r,defineIndex:t}},$e=(e,t)=>{let a=0;const r=[];return null===e||void 0===e||e.map(e=>{const{order_items:n,order_sn:s,buyer_user:o}=e;let i={bgColor:"",business:""};e.order_items.length>1&&(i.bgColor=B(),i.business=o.user_name),"spec007"===t&&(i.bgColor=Re(o),i.business=o.user_name),n.map((e,n)=>{const{item_list:l}=e;if(0===l.length){const t=P(e);for(let n=0;n<e.amount;n++){const n=e.product.images[0],o={...i,order_sn:s,img:`https://s-cf-br.shopeesz.com/file/${n}_tn`,imgId:n,spec:t.spec,sizeAndNum:""+t.size,buyName:"",number:""};r.push(o),a++}}else{const{bundle_deal_model:n,bundle_deal_product:c}=e;i.bgColor||(i.bgColor=B()),i.business||(i.business=o.user_name),"spec007"===t&&(i.bgColor=Re(o),i.business=o.user_name),l.map((e,t)=>{const o=U(n[t].name),l=c[t].images[0];for(let n=0;n<e.amount;n++){const e={...i,order_sn:s,img:`https://s-cf-br.shopeesz.com/file/${l}_tn`,imgId:l,spec:o.spec,sizeAndNum:""+o.size,buyName:"",number:""};r.push(e),a++}})}})}),{arr:r,goodsImgNum:a}};let Ie="",Le="";const Re=e=>(e.user_id!==Ie&&(Le=B(),Ie=e.user_id),Le);var Te=a("21a6"),Be=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"close-on-click-modal":!0,title:"按照选中的条件转化数据==>下载",visible:e.dialogVisible,width:"400px",top:"28vh","before-close":e.onCancel},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),t("div",{staticStyle:{"margin-bottom":"10px"}}),t("el-checkbox-group",{on:{change:e.handleChange},model:{value:e.checkedIds,callback:function(t){e.checkedIds=t},expression:"checkedIds"}},e._l(e.datas,(function(a){return t("el-checkbox",{key:a.id,attrs:{label:a.id}},[e._v(e._s(a.value))])})),1),t("div",{staticClass:"main-btn"},[t("el-input",{staticStyle:{width:"60px"},attrs:{size:"small",placeholder:"开始索引,默认1"},model:{value:e.orderInx,callback:function(t){e.orderInx=t},expression:"orderInx"}}),t("el-button",{staticClass:"main-btn1",attrs:{type:"danger"},on:{click:e.onOk}},[e._v("开始转化")])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"order-sn",attrs:{size:"small",type:"info"},on:{click:e.exportSn}},[e._v("单号汇总")]),t("download-excel",{ref:"download-img",class:["export-img img"],attrs:{data:e.imgExportData||[],name:e.imgExportName}},[e._v("下载img ")]),t("download-excel",{ref:"download",class:["export-img doOrder"],attrs:{data:e.specExportData||[],name:e.specExportName}},[e._v(" 下载做单 ")])],1)],1)},Pe=[];const Ue=()=>{const{allOrder_sn:e}=window.__shop_save_datas||{};if(e)return Xe(e)},Xe=e=>{const t=Object(_["chunk"])(e,4);let a="";return t.map(e=>{a=a+e.join(" ")+"\r\n"}),a},Je=e=>e?null===e||void 0===e?void 0:e.map(e=>e.order_sn):[],Me=Object(_["cloneDeep"])(j),Fe=Me.map(e=>e.id),Ve=Object(_["cloneDeep"])(Fe);Ve.pop();const Ke=Ve;var qe={props:["dialogVisible"],data(){return{checkAll:!1,checkedIds:Ke,datas:Me,isIndeterminate:!0,name:"汇总",imgExportData:[],imgExportName:"",specExportData:[],specExportName:"",snExportData:"",orderInx:1}},computed:{},methods:{handleCheckAll(e){this.checkedIds=e?Fe:[],this.isIndeterminate=!1},handleChange(e){let t=e.length;this.checkAll=t===this.datas.length,this.isIndeterminate=t>0&&t<this.datas.length},onCancel(){this.checkAll=!1,this.checkedIds=Ke,this.datas=Me,this.isIndeterminate=!0,this.imgExportData=[],this.imgExportName="",this.specExportData=[],this.specExportName="",this.snExportData="",this.orderInx=1,this.$emit("onCancel",{})},onOk(){const{dataSource:e={},fileName:t,timer:a}=window.__shop_save_datas||{};e&&e.spec000?(this.exportImg({dataSource:e,fileName:t,timer:a}),this.setSnData({dataSource:e,fileName:t,timer:a}),this.exportDoSn({dataSource:e,fileName:t,timer:a}),this.$message({message:"汇总数据转化成功，快去下载",showClose:!0,type:"success",duration:800,offset:10})):this.$message({message:"请先转化数据",showClose:!0,type:"error",duration:800,offset:10})},exportDoSn({dataSource:e,fileName:t,timer:a}){this.specExportName=`${t||""}${this.name}做单-${a}.xls`;const r=[];this.checkedIds.map(t=>{const a=$e(e[t],t);r.push(...a.arr)}),console.log(r,"---做单的数据");const n=Ne(r,this.orderInx);this.specExportData=null===n||void 0===n?void 0:n.arr},exportImg({dataSource:e,fileName:t,timer:a}){const r=[];this.checkedIds.map(t=>{const a=$e(e[t],t);r.push(...a.arr)}),this.imgExportData=Ce(r),this.imgExportName=`${t||""}${this.name}报货-${a}.xls`},setSnData({dataSource:e,fileName:t,timer:a}){const r=[];this.checkedIds.map(t=>{const a=Je(e[t]);r.push(...a)}),this.snExportData=Xe(r)},exportSn(){if(!this.snExportData)return;const{fileName:e,timer:t}=window.__shop_save_datas||{},a=new Blob([this.snExportData],{type:"text/plain;charset=utf-8"}),r=`${e||""}${this.name}单号-${t}.txt`;Object(Te["saveAs"])(a,""+r)}}},He=qe,Ge=(a("fcc0"),Object(o["a"])(He,Be,Pe,!1,null,"ad65bc64",null)),Ze=Ge.exports,We={name:"Main",components:{Empty:D,Box:Ze},data:()=>({orderArrsDatas:{},orderAllNum:0,goodsAllNum:0,fileName:"",allIndex:{},allExportDatas:{},specExportData:{},imgExportData:{},downBtn:[],timer:"",dataScreen:{exportData:[],fields:{}},lastOrderNum:"",isOrderPage:null,boxVisible:!1}),beforeMount(){this.downBtn=[],this.$route.query&&1==this.$route.query.type?(this.isOrderPage=!0,this.downBtn=E):this.$route.query&&2==this.$route.query.type?(this.isOrderPage=!0,this.downBtn=k):(this.isOrderPage=!1,this.downBtn=j)},mounted(){this.initDataScreenFields()},methods:{save({data:e,lastOrderNum:t}){this.lastOrderNum=t;const{group:a}=e,r=_e({arrs:a});this.orderArrsDatas=Object(_["cloneDeep"])(r),this.setExcelTable(r),this.timer=L(),window.__shop_save_datas={...window.__shop_save_datas,fileName:this.fileName,timer:this.timer,dataSource:JSON.parse(JSON.stringify({...this.orderArrsDatas}))}},setExcelTable(e){let t=0,a=0;this.specExportData=e;for(const r in e)if(a+=e[r].length,e[r].length>0){const a=je({arrDatas:e[r],key:r,defineIndex:this.allIndex[r]});this.specExportData[r]=a.tableArrs,console.log(a,"====imgExportData"),this.imgExportData[r]=a.imgExportData,this.allExportDatas[r]=a,t+=a.goodsImgNum}this.goodsAllNum=t,this.orderAllNum=a,this.$message({message:"数据转化成功，快去下载",showClose:!0,type:"success",duration:800,offset:10}),this.createExportDataScreen()},createExportDataScreen(){const e={};for(const a in this.allExportDatas)e[a]="订单数"+this.orderArrsDatas[a].length+" / 结束索引"+(this.allExportDatas[a].defineIndex-1);const t={orderAllNum:this.orderAllNum,goodsAllNum:this.goodsAllNum,lastOrderNum:this.lastOrderNum,fileName:this.fileName+"xx"+this.timer,...e};this.dataScreen.exportData=[t]},initDataScreenFields(){const e={"订单总条数":"orderAllNum","衣服总件数":"goodsAllNum","最后一条订单单号":"lastOrderNum"};this.downBtn.map(t=>{e[t.value]=t.id,this.$set(this.allIndex,[t.id],1)}),this.dataScreen.fields=e},scrollTop(){document.documentElement.scrollTop=document.body.scrollHeight},exportOrder(){const{allOrder_sn:e}=window.__shop_save_datas||{};if(e){const t=Ue(e),a=new Blob([t],{type:"text/plain;charset=utf-8"}),r=`${this.fileName||""}汇总全部单号-${this.timer}.txt`;Object(Te["saveAs"])(a,""+r),this.$message({message:"单号汇总，下载成功～",showClose:!0,type:"success",duration:800,offset:10})}else this.$message({message:"请先转化数据",showClose:!0,type:"error",duration:800,offset:10})},handleBox(){this.boxVisible=!0}}},Ye=We,Qe=(a("5a1a"),Object(o["a"])(Ye,b,h,!1,null,"61096860",null)),et=Qe.exports,tt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main"},[t("p",{staticClass:"title"},[e._v("开心快乐飞起~")]),t("span",{staticClass:"psw"},[t("label",{staticClass:"psw-label",attrs:{for:"登录密码"}},[e._v("登录密码:")]),t("el-input",{attrs:{placeholder:"请输入登录密码","show-password":""},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),t("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")])],1)},at=[],rt={name:"Lock",data:()=>({input:"",islock:sessionStorage.getItem("isShopLock")}),methods:{login(){"身体健康第一位"===this.input?(this.islock=!0,sessionStorage.setItem("isShopLock",!0),this.$message({message:"登录成功",type:"success",showClose:!0,duration:1e3}),this.$emit("login",!0)):this.$message({message:"密码错误",type:"error",showClose:!0,duration:1e3})}}},nt=rt,st=(a("48b2"),Object(o["a"])(nt,tt,at,!1,null,"2afaa50f",null)),ot=st.exports,it=function(){var e=this,t=e._self._c;return t("div",{staticClass:"sys2-box"},[t("Config",{attrs:{dialogVisible:e.configVisible},on:{onOk:function(t){e.configVisible=!1},onCancel:e.confCancle}}),t("el-button",{staticClass:"conf-btn",on:{click:function(t){e.configVisible=!0}}},[e._v("规格金额配置")]),t("el-button",{staticClass:"empt-btn",attrs:{type:"warning"},on:{click:e.empty}},[e._v("清空全部")]),t("Upload",{ref:"unploadRef",on:{onOk:e.getData}}),t("Goods",{ref:"goodsRef",attrs:{_EXPORT_DATAS:e.completeDataSource}})],1)},lt=[],ct=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"box-card"},[t("el-upload",{attrs:{action:"#","auto-upload":!1,"on-change":e.onChange,"on-remove":e.handleRemove,"file-list":e.fileList,multiple:"",accept:".xls,.xlsx"}},[e._v(" 第一步： "),t("el-button",{attrs:{type:"primary"}},[e._v("选择文件")])],1),t("div",{staticClass:"exp"},[e._v(" 第二步： "),t("el-button",{staticStyle:{width:"60%"},attrs:{type:"danger"},on:{click:e.submit}},[e._v("（选择文件"+e._s(e.fileList.length||0)+"个）-----导入-----（导入成功"+e._s(e.dataSource.length)+"个）")])],1)],1)},dt=[];a("13d5");const ut={"订单号":"orderCode","订单金额":"amount","产品规格":"spec","商品尺寸":"size","产品数量":"number","图片网址":"imgUrl","买家账号":"buyerAccount","店铺账号":"storeName"},mt=[{value:"sem nome e número",label:"没有姓名和号码"},{value:"sem nome e número+Brasileirão",label:"没有姓名和号码+Brasileirão"},{value:"sem nome e número+Libertadores",label:"没有名字和号码+解放者"},{value:"sem nome e número(UCL Patch)",label:"没有姓名和号码（UCL 补丁）"},{value:"sem nome e número(SERIE A)",label:"无姓名和编号（A 系列）"},{value:"sem nome e número(LIGUE Patch)",label:"没有姓名和号码（CALL 补丁）"},{value:"sem nome e número(EPL Patch)",label:"没有姓名和号码（EPL 补丁）"},{value:"sem nome e número(Laliga Patch)",label:"没有姓名和号码（Laliga 补丁）"},{value:"Com nome e número",label:"有名字和号码"},{value:"Com nome e número+Brasileirão",label:"带有姓名和号码+Brasileirão"},{value:"Com nome e número+Libertadores",label:"yy有姓名和号码+解放者队yy"},{value:"Com nome e número(UCL Patch)",label:"有姓名和号码（UCL 补丁）"},{value:"Com nome e número(SERIE A)",label:"带有姓名和号码（A 系列）"},{value:"Com nome e número(LIGUE Patch)",label:"带姓名和号码（CALL 补丁）"},{value:"Com nome e número(EPL Patch)",label:"带姓名和号码（EPL 补丁）"},{value:"Com nome e número(Laliga Patch)",label:"带有姓名和号码（Laliga 补丁）"}],pt="230",bt=e=>e.map(e=>e.value),ht=[{value:"sys2-sameBuyer",label:"同个买家下多个单",valKey:"_sameBuyerDataSource"},{value:"sys2-money",label:"大于R$230的单",valKey:"_more230DataSource"},{value:"sys2-examine",label:"人工审核",valKey:"_examineDataSource"},{value:"sys2-noCustomized",specs:bt(mt.slice(0,8)),label:"不定制",valKey:"_nocustomizedDataSource"},{value:"sys2-customized",specs:bt(mt.slice(8)),label:"定制",valKey:"_customizedDataSource"}],gt=e=>{if(!e)return"没码数";let t=[];const a=e.indexOf("="),r=e.indexOf("（"),n=e.indexOf("(");return t=-1!==a?e.split("="):-1!==r?e.split("（"):-1!==n?e.split("("):e.split(),t[0]},ft=()=>{const e="#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0");return e},_t=e=>e.map(e=>{const t={};for(const a in e){const r=e[a],n=ut[a];let s=[];"产品规格"===a?(s=r.split(","),t["spec"]=s[0],t["size"]=gt(s[1])):n&&(t[n]=r)}return t}),yt=e=>{const t=Object(_["cloneDeep"])(e),a=[],r=[];t.map(e=>{const t=a.indexOf(e.orderCode),n=[],s=ft();for(let a=0;a<e.number;a++)n.push({textColor:s,spec:e.spec,size:e.size,number:1,imgUrl:e.imgUrl,orderCode:e.orderCode,buyerAccount:e.buyerAccount,storeName:e.storeName});if(-1===t){a.push(e.orderCode);const t={orderCode:e.orderCode,amount:e.amount,buyerAccount:e.buyerAccount};r.push({...t,goodsList:n})}else{let e=r[t].goodsList.concat(n);e=e.map(e=>({...e,textColor:s})),r[t].goodsList=e}});const n={flatDataSource:t,orderDataSource:r,allOrderCodes:a};return n},vt=a("25ca");var xt={data(){return{fileList:[],dataSource:[]}},methods:{handleRemove(e,t){this.fileList=t},onChange(e,t){this.fileList=t},empty(){this.fileList=[],this.dataSource=[]},async submit(){this.dataSource=[],await this.fileList.map(e=>{this.readerFiles(e)}),setTimeout(()=>{this.getFlatDataSource()},500)},async readerFiles(e){let t=await new Promise(t=>{let a=new FileReader;a.readAsBinaryString(e.raw),a.onload=e=>{t(e.target.result)}}),a=vt.read(t,{type:"binary",cellDates:!0}),r=a.Sheets[a.SheetNames[0]];this.getHeaderRow(r);const n=vt.utils.sheet_to_json(r);this.dataSource.push(n)},getHeaderRow(e){const t=[],a=vt.utils.decode_range(e["!ref"]);let r;const n=a.s.r;for(r=a.s.c;r<=a.e.c;++r){const a=e[vt.utils.encode_cell({c:r,r:n})];let s="UNKNOWN "+r;a&&a.t&&(s=vt.utils.format_cell(a)),t.push(s)}return t},setOneArrFormat(){const e=this.dataSource.reduce((e,t)=>e.concat(t),[]);return e},getFlatDataSource(){if(0===this.dataSource.length)return void this.$message.error("请先导入数据");const e=this.setOneArrFormat(),t=_t(e),a=yt(t);return this.$emit("onOk",a),a}}},St=xt,Dt=(a("7cee"),Object(o["a"])(St,ct,dt,!1,null,"12f3dc7b",null)),Ot=Dt.exports,Ct=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"main-btn"},[e._v(" 第三步："),t("el-button",{staticClass:"main-btn1",attrs:{type:"success"},on:{click:e.onOk}},[e._v("导出excel")])],1),t("el-divider"),e._v(" 第四步： "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"order-sn",attrs:{size:"small",type:"info"},on:{click:e.exportSn}},[t("i",{staticClass:"el-icon-download"}),e._v("单号汇总")]),t("download-excel",{ref:"download-img",class:["export-img img"],attrs:{data:e.imgExport.data||[],name:e.imgExport.name}},[t("i",{staticClass:"el-icon-download"}),e._v("下载img ")]),e._l(e.downBtns,(function(a){return t("span",{key:a.value},[t("download-excel",{ref:"download",refInFor:!0,class:["export-img doOrder"],attrs:{data:e.orderExportObj[a.valKey]||[],name:`${e.fileName}做单--${a.label}-${e.timer}.xlsx`}},[t("i",{staticClass:"el-icon-download"}),e._v(" "+e._s(a.label)+" "),e._EXPORT_DATAS.doOrdersDataSource?t("span",[e._v(" （"+e._s(e._EXPORT_DATAS.doOrdersDataSource[a.valKey].length>0?"有":"无")+"） ")]):e._e()])],1)}))],2),t("div",{staticClass:"zdy-ipt"},[e._v(" 下载文件名: "),t("el-input",{staticStyle:{width:"240px","margin-right":"16px"},attrs:{size:"small",placeholder:"下载文件名"},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}}),e._v(" excel的索引： "),t("el-input",{staticStyle:{width:"60px"},attrs:{size:"small",placeholder:"开始索引,默认1"},model:{value:e.startIndex,callback:function(t){e.startIndex=t},expression:"startIndex"}})],1)],1)},wt=[];const kt=e=>{const t=Object(_["chunk"])(e,4);let a="";return t.map(e=>{a=a+e.join(" ")+"\r\n"}),a},At=()=>{const e=new Date,t=e.getMonth()+1,a=t<10?"0"+t:t;let r=e.getFullYear()+"-"+a+"-"+e.getDate();return r},Et="<table>\n<tr >\n    <td></td>\n    </table>",zt=({img:e,specStr:t})=>`<table border="1"  align="center" bgcolor="#e5e9f2">  \n    <tr align="center" valign="center">\n        <td  height=200 width=200 align="center" valign="center"> <img src="${e}" width="100" height="100" /></td>\n    </tr>\n    <tr align="center">\n        <td width="200">${t}</td>\n    </tr>       \n</table>`,jt='<table  align="center" >\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n</table>'+Et,Nt='<table  align="center" >\n<colgroup>\n    <col span="1"style="">\n  </colgroup>\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n</table>'+Et,$t=e=>{const t=At();return`<table border="1"  align="center" >\n    <colgroup>\n        <col span="1"style="">\n      </colgroup>\n    <tr align="center" valign="center">\n        <td  height=200 width=200 align="center" valign="center"  style="color:#fd0004;font-size: 72px;">${e}</td>\n    </tr>\n    <tr align="center">\n        <td>店名（${t}）</td>\n    </tr>\n    <tr align="center">\n        <td>买家</td>\n    </tr>\n    <tr align="center">\n        <td  >名字</td>\n    </tr>\n    <tr align="center">\n        <td>号码</td>\n    </tr>\n    <tr align="center">\n        <td>规格</td>\n    </tr>\n    <tr align="center">\n        <td>尺寸</td>\n    </tr>\n    <tr align="center">\n        <td>订单号</td>\n    </tr>\n    <tr align="center">\n    <td>备注</td>\n</tr>\n</table>`},It=({textColor:e,img:t,DZbuyName:a,DZnumber:r,business:n,storeName:s,spec:o,size:i,order_sn:l,sBuyColor:c=""})=>`<table border="1"  align="center"  bgcolor="#e5e9f2">\n        <colgroup>\n            <col span="1"style="">\n          </colgroup>\n        <tr align="center" valign="center">\n            <td  height=200 width=200 align="center" valign="center"> <img src="${t}" height="100" /></td>\n        </tr>\n        <tr align="center">\n            <td  >${s}</td>\n        </tr>\n        <tr align="center">\n            <td  style="background-color:${c||e}">${n}</td>\n        </tr>\n        <tr align="center">\n            <td  >${a}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:green">${r}</td>\n        </tr>\n        <tr align="center">\n            <td >${o}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:red">${i}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:${c?e:"blue"}">${l}</td>\n        </tr>\n        <tr align="center">\n        <td></td>\n    </tr>\n    </table>`,Lt=e=>{const t=Pt(e),a=Object(_["flatten"])(Bt(t)),r=Rt(a);return r},Rt=e=>{const t=Object(_["chunk"])(e,4),a=[];return t.map(e=>{let t={};e.map((e,a)=>{const r=Object(_["map"])(e.sizeNum,"size_num_str").join("/");t["picture-picture-picture"+a]=zt({img:e.imgUrl,specStr:r}),t[`empty${a}-`]=jt}),a.push(t)}),a},Tt=["S","M","L","XL","XXL","XXXL","12","14","16","18","20","22","24","26","28","30"],Bt=e=>e.map(e=>{const t=e.sizeNum.sort((e,t)=>Tt.indexOf(e.size)-Tt.indexOf(t.size));return{imgUrl:e.imgUrl,sizeNum:t}}),Pt=e=>{const t=[];return e.map(e=>{const a=e.imgUrl,r=Object(_["findIndex"])(t,["imgUrl",a]),n=e.size,s=e.number;if(-1===r){const e=Xt(n,s),r={imgUrl:a,sizeNum:[e]};t.push(r)}else Ut(t[r],{size:n,number:s})}),t},Ut=(e,{size:t,number:a})=>{const r=Object(_["findIndex"])(e.sizeNum,["size",t]);if(-1===r){const r=Xt(t,a);e.sizeNum.push(r)}else e.sizeNum[r].number+=a,e.sizeNum[r].size_num_str=t+e.sizeNum[r].number},Xt=(e,t)=>({size:e,number:t,size_num_str:e+t}),Jt=(e,t="1")=>{const{_sameBuyerDataSource:a,_more230DataSource:r,_customizedDataSource:n,_nocustomizedDataSource:s,_examineDataSource:o}=e,i={_sameBuyerDataSource:Ft(Mt(a),t),_more230DataSource:Ft(Mt(r),t),_customizedDataSource:Ft(Mt(n),t),_nocustomizedDataSource:Ft(Mt(s),t),_examineDataSource:Ft(Mt(o),t)};return i},Mt=e=>{const t=e.map(e=>e.goodsList);return Object(_["flatten"])(t)},Ft=(e,t)=>{const a=Object(_["chunk"])(e,4),r=[];return a.map((e,a)=>{let n={left:$t(t)};e.map((e,t)=>{n["data"+t]=It({textColor:e.textColor,img:e.imgUrl,DZbuyName:"",DZnumber:"",business:e.buyerAccount,spec:e.spec,size:e.size,order_sn:e.orderCode,sBuyColor:e.sBuyColor||"",storeName:e.storeName}),n[`empty${t}-`]=Nt}),r.push(n),t++}),r},Vt=JSON.parse(window.localStorage.getItem("__sys2-base")),Kt=Object(_["cloneDeep"])(null===Vt||void 0===Vt?void 0:Vt.btns),qt=null===Kt||void 0===Kt?void 0:Kt.map(e=>e.value),Ht=Object(_["cloneDeep"])(qt),Gt=Ht;var Zt={props:{_EXPORT_DATAS:{type:Object,default:()=>{}}},data(){return{downBtns:Vt.btns,checkAll:!1,checkedIds:Gt,fileName:"",timer:"",startIndex:"1",imgExport:{data:[],name:""},orderExport:{data:[],name:""},orderExportObj:{}}},computed:{},methods:{onOk(){this._EXPORT_DATAS.allOrderCodes?(this.timer=At(),this.exportImg(this._EXPORT_DATAS.flatDataSource),this.exportOrders(this._EXPORT_DATAS.doOrdersDataSource),this.$message.success("导出成功，快去下载")):this.$message.error("请先导入数据")},exportOrders(){this.orderExportObj=Jt(this._EXPORT_DATAS.doOrdersDataSource,this.startIndex)},exportImg(){this.imgExport.data=Lt(this._EXPORT_DATAS.flatDataSource),this.imgExport.name=`${this.fileName||""}报货-${this.timer}.xlsx`},exportSn(){if(!this._EXPORT_DATAS.allOrderCodes)return;const e=kt(this._EXPORT_DATAS.allOrderCodes),t=new Blob([e],{type:"text/plain;charset=utf-8"}),a=`${this.fileName||""}单号-${this.timer}.txt`;Object(Te["saveAs"])(t,""+a)},handleCheckAll(e){this.checkedIds=e?qt:[],this.isIndeterminate=!1},handleChange(e){let t=e.length;this.checkAll=t===this.datas.length,this.isIndeterminate=t>0&&t<this.datas.length},empty(){this.orderExportObj={},this.orderExport.data=[],this.orderExport.name="",this.imgExport.data=[],this.imgExport.name=""}}},Wt=Zt,Yt=(a("e52a"),Object(o["a"])(Wt,Ct,wt,!1,null,"da9dd33c",null)),Qt=Yt.exports,ea=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,visible:e.dialogVisible,title:"配置信息",width:"70%",height:"500px","before-close":e.onCancel},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-tabs",{staticClass:"demo-dynamic",attrs:{value:"customized"},on:{"tab-click":e.handleClick}},[t("el-tab-pane",{attrs:{label:"金额",name:"priceLimit"}},[t("el-form",{ref:"formData",attrs:{model:e.formData}},[t("el-form-item",{attrs:{prop:"money",rules:[{required:!0,message:"不能为空保存",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"设置超过多少钱拿出这个单"},model:{value:e.formData.money,callback:function(t){e.$set(e.formData,"money",t)},expression:"formData.money"}})],1)],1),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveMoney("formData")}}},[e._v("保存")])],1),t("el-tab-pane",{attrs:{label:`定制（${e.formData.dzSpec.length}）`,name:"customized"}},[t("SpecTable",{attrs:{data:e.formData.dzSpec},on:{submit:e.customizedSubmit}})],1),t("el-tab-pane",{attrs:{label:`不定制（${e.formData.ndzSpec.length}）`,name:"noCustomized"}},[t("SpecTable",{attrs:{data:e.formData.ndzSpec},on:{submit:e.noCustomizedSubmit}})],1),t("el-tab-pane",{attrs:{label:"规格",name:"btns"}},e._l(e.formData.btns,(function(a){return t("div",{key:a.value},[t("p",[e._v(e._s(a.label))])])})),0)],1)],1)},ta=[],aa=function(){var e=this,t=e._self._c;return t("div",[t("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:"400"}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t("el-table-column",{attrs:{prop:"value",label:"英文规格"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:a.row.isEdit,expression:"scope.row.isEdit"}],attrs:{type:"text",placeholder:"请输入英文规格"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!a.row.isEdit,expression:"!scope.row.isEdit"}]},[e._v(e._s(a.row.value))])]}}])}),t("el-table-column",{attrs:{prop:"label",label:"中文规格"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:a.row.isEdit,expression:"scope.row.isEdit"}],attrs:{type:"text",placeholder:"请输入中文规格"},model:{value:a.row.label,callback:function(t){e.$set(a.row,"label",t)},expression:"scope.row.label"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!a.row.isEdit,expression:"!scope.row.isEdit"}]},[e._v(e._s(a.row.label))])]}}])}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.isEdit?a.row.isEdit?t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.edit(a,!1)}}},[e._v("完成")]):e._e():t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.edit(a,!0)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.del(a)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"add-list"},[t("el-button",{attrs:{type:"info",icon:"el-icon-plus"},on:{click:function(t){return e.add()}}},[e._v("新增")]),t("el-button",{staticStyle:{"margin-left":"20%"},attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("保存")])],1)],1)},ra=[],na={props:["data"],watch:{data:{handler:"initData",immediate:!0}},data(){return{tableData:[]}},methods:{initData(e){this.tableData=e},submit(){const e=this.tableData.map(e=>{if(!Object(_["isEmpty"])(e.label)||!Object(_["isEmpty"])(e.value))return{label:e.label.trim(),value:e.value.trim()};this.$message.error("规则信息不能为空!")});console.log(e,"--_tableData"),this.$emit("submit",e)},add(){this.defaultState(),this.tableData.push({label:"",value:"",isEdit:!0}),setTimeout(()=>{this.$refs.table.bodyWrapper.scrollTop=9999},500)},edit(e,t){this.defaultState(),this.$set(this.tableData,e.$index,{...e.row,isEdit:t})},del(e){this.tableData.splice(e.$index,1)},defaultState(){this.tableData=this.tableData.map(e=>({...e,isEdit:!1}))}}},sa=na,oa=(a("1ba9"),Object(o["a"])(sa,aa,ra,!1,null,"3bc5e7fe",null)),ia=oa.exports;const la=JSON.parse(window.localStorage.getItem("__sys2-base"))||{};console.log(Object(_["isEmpty"])(la)?ht:la.btns,44454);var ca={components:{SpecTable:ia},props:["dialogVisible"],data(){return{formData:{ndzSpec:Object(_["isEmpty"])(la)?mt.slice(0,8):la.ndzSpec,dzSpec:Object(_["isEmpty"])(la)?mt.slice(8):la.dzSpec,money:Object(_["isEmpty"])(la)?pt:la.money,btns:Object(_["isEmpty"])(la)?ht:la.btns}}},methods:{handleClick(e,t){},onCancel(){this.$emit("onCancel")},customizedSubmit(e){console.log("查看定制规则======",e),this.formData.dzSpec=e,this.specLocalData()},noCustomizedSubmit(e){console.log("查看不定制规则======",e),this.formData.ndzSpec=e,this.specLocalData()},saveMoney(e){this.$refs[e].validate(e=>{if(e){const e=Object(_["findIndex"])(ht,["value","sys2-money"]);this.formData.btns[e].label=`大于R$${this.formData.money}的单`,window.localStorage.setItem("__sys2-base",JSON.stringify(this.formData)),this.$message.success("配置成功")}})},specLocalData(){const e=Object(_["findIndex"])(ht,["value","sys2-customized"]);this.formData.btns[e].specs=this.getKeys(this.formData.dzSpec);const t=Object(_["findIndex"])(ht,["value","sys2-noCustomized"]);this.formData.btns[t].specs=this.getKeys(this.formData.ndzSpec),window.localStorage.setItem("__sys2-base",JSON.stringify(this.formData)),this.$message.success("配置成功")},getKeys(e){return e.map(e=>e.value)}}},da=ca,ua=(a("5e98"),Object(o["a"])(da,ea,ta,!1,null,"24ae3de0",null)),ma=ua.exports;const pa=JSON.parse(window.localStorage.getItem("__sys2-base")),ba=null===pa||void 0===pa?void 0:pa.btns,ha=({orderDataSource:e})=>{const t=[],a=[],r=[],n=[],s=[];return e.map(e=>{const o=ft(),i=t.indexOf(e.buyerAccount);-1===i?(t.push(e.buyerAccount),r.push(e.orderCode)):(a.push(e.buyerAccount),n.push(r[i]),n.push(e.orderCode),s.push({code:r[i],sBuyColor:o}),s.push({code:e.orderCode,sBuyColor:o}),t.splice(i,1),r.splice(i,1))}),{moreCodesAndColor:Object(_["uniqBy"])(s,"code"),buyMoreOrderCodes:Object(_["uniq"])(n)}},ga=({orderDataSource:e})=>{const t=pa.money||"170",a=[],r=[];return e.map(e=>{parseFloat(e.amount)>parseFloat(t)?r.push(e.orderCode):a.push(e.orderCode)}),{less230OrderCodes:Object(_["uniq"])(a),more230OrderCodes:Object(_["uniq"])(r)}},fa=({orderDataSource:e})=>{const t=ya({key:"sys2-customized",orderDataSource:e});return{custOrderCodes:Object(_["uniq"])(t)}},_a=({orderDataSource:e})=>{const t=ya({key:"sys2-noCustomized",orderDataSource:e});return{noCustOrderCodes:Object(_["uniq"])(t)}},ya=({key:e,orderDataSource:t})=>{const a=Object(_["find"])(ba,["value",e]),r=a.specs,n=[];return t.map(e=>{const t=Object(_["map"])(e.goodsList,"spec"),a=Object(_["uniq"])(t),s=Object(_["some"])(r,e=>Object(_["includes"])(a,e));s&&n.push(e.orderCode)}),n},va=(JSON.parse(window.localStorage.getItem("__sys2-base")),e=>{const t=Object(_["cloneDeep"])(e),{moreCodesAndColor:a}=ha({orderDataSource:t.orderDataSource}),r=Sa({codeColorArrs:a,_DATA_OBJ:t}),{more230OrderCodes:n}=ga({orderDataSource:t.orderDataSource}),s=xa({codeArrs:n,_DATA_OBJ:t}),{custOrderCodes:o}=fa({orderDataSource:t.orderDataSource}),i=xa({codeArrs:o,_DATA_OBJ:t}),{noCustOrderCodes:l}=_a({orderDataSource:t.orderDataSource}),c=xa({codeArrs:l,_DATA_OBJ:t}),d=t.orderDataSource,u={doOrdersDataSource:{_sameBuyerDataSource:r,_more230DataSource:s,_customizedDataSource:i,_nocustomizedDataSource:c,_examineDataSource:d},flatDataSource:t.flatDataSource,allOrderCodes:t.allOrderCodes};return u}),xa=({codeArrs:e,_DATA_OBJ:t})=>{const a=[];return e.map(e=>{const r=Object(_["findIndex"])(t.orderDataSource,["orderCode",e]);-1!==r&&(a.push(t.orderDataSource[r]),t.orderDataSource.splice(r,1))}),a},Sa=({codeColorArrs:e,_DATA_OBJ:t})=>{const a=[];return e.map(e=>{const r=Object(_["findIndex"])(t.orderDataSource,["orderCode",e.code]);if(-1!==r){const n=t.orderDataSource[r];n.goodsList=n.goodsList.map(t=>({...t,sBuyColor:e.sBuyColor})),a.push(n),t.orderDataSource.splice(r,1)}}),a},Da=JSON.parse(window.localStorage.getItem("__sys2-base"))||{};var Oa={name:"Home",components:{Upload:Ot,Goods:Qt,Config:ma},mounted(){},data:()=>({configVisible:!!Object(_["isEmpty"])(Da),completeDataSource:{}}),methods:{getData(e){this.completeDataSource=va(e),this.$message({message:"汇总导入成功，快去下载",showClose:!0,type:"success",duration:1500,offset:10}),console.log(this.completeDataSource,"转的数据")},empty(){this.$refs.unploadRef.empty(),this.completeDataSource={},this.$refs.goodsRef.empty()},confCancle(){this.configVisible=!1,window.location.reload()}}},Ca=Oa,wa=(a("e488"),Object(o["a"])(Ca,it,lt,!1,null,"7b3d6ed3",null)),ka=(wa.exports,function(){var e=this,t=e._self._c;return t("div",{staticClass:"sys3-box"},[t("Config",{attrs:{dialogVisible:e.configVisible},on:{onOk:function(t){e.configVisible=!1},onCancel:e.confCancle}}),t("el-button",{staticClass:"conf-btn",on:{click:function(t){e.configVisible=!0}}},[e._v("规格金额配置")]),t("el-button",{staticClass:"empt-btn",attrs:{type:"warning"},on:{click:e.empty}},[e._v("清空全部")]),t("Upload",{ref:"unploadRef",on:{onOk:e.getData}}),t("Goods",{ref:"goodsRef",attrs:{_EXPORT_DATAS:e.completeDataSource}})],1)}),Aa=[],Ea=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"box-card"},[t("el-upload",{attrs:{action:"#","auto-upload":!1,"on-change":e.onChange,"on-remove":e.handleRemove,"file-list":e.fileList,multiple:"",accept:".xls,.xlsx"}},[e._v(" 第一步： "),t("el-button",{attrs:{type:"primary"}},[e._v("选择文件")])],1),t("div",{staticClass:"exp"},[e._v(" 第二步： "),t("el-button",{staticStyle:{width:"60%"},attrs:{type:"danger"},on:{click:e.submit}},[e._v("（选择文件"+e._s(e.fileList.length||0)+"个）-----导入-----（导入成功"+e._s(e.dataSource.length)+"个）")])],1)],1)},za=[];const ja={"订单号":"orderCode","产品规格":"spec","商品尺寸":"size","产品数量":"number","图片网址":"imgUrl","订单备注":"orderRemark","买家账号":"buyerAccount","买家Email":"buyerEmail","买家留言":"buyerLiuyan"},Na=[{value:"Other(Add In The Instruction)",label:"定制名称和号码"},{value:"With name and number",label:"定制名称和号码"},{value:"Badges and custom information:Euro 2024 badges",label:"单补丁"}],$a=[{value:"No",label:"不定制"},{value:"no",label:"不定制"},{value:"",label:"不定制"}],Ia="230",La=e=>e.map(e=>e.value),Ra=[{value:"sys3-sameBuyer",label:"同个买家下多个单",valKey:"_sameBuyerDataSource"},{value:"sys3-noCustomized",specs:La($a),label:"不定制",valKey:"_nocustomizedDataSource"},{value:"sys3-customized_default",specs:[],label:"默认定制",valKey:"_customizedDataSource_default"},{value:"sys3-examine_hasRemark",specs:La(Na),label:"定制：有备注",valKey:"_examineDataSource_hasRemark"},{value:"sys3-examine",label:"人工审核",valKey:"_examineDataSource"}],Ta=e=>{if(!e)return"没码数";let t=[];const a=e.indexOf(":"),r=e.indexOf("："),n=e.indexOf("="),s=e.indexOf("（"),o=e.indexOf("(");return t=-1!==a?e.split(":"):-1!==r?e.split("："):-1!==n?e.split("="):-1!==s?e.split("（"):-1!==o?e.split("("):e.split(),t[1]},Ba=()=>{const e="#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0");return e},Pa=e=>e.map(e=>{const t={};for(const a in e){const r=e[a],n=ja[a];let s=[];if("产品规格"===a)if(-1===r.indexOf("Size"))t["size"]=null,t["spec"]=r;else{s=r.split("Custom Items"),t["size"]=Ta(s[0]);const e=s[1];t["spec"]=e?e.replace(":",""):""}else n&&(t[n]=r)}return t}),Ua=e=>{const t=Object(_["cloneDeep"])(e),a=[],r=[];t.map(e=>{const t=a.indexOf(e.orderCode),n=[],s=Ba();for(let a=0;a<e.number;a++)n.push({textColor:s,spec:e.spec,size:e.size,number:1,imgUrl:e.imgUrl,orderCode:e.orderCode,buyerAccount:e.buyerAccount,buyerEmail:e.buyerEmail,buyerLiuyan:e.buyerLiuyan,orderRemark:e.orderRemark});if(-1===t){a.push(e.orderCode);const t={orderCode:e.orderCode,amount:e.amount,buyerAccount:e.buyerAccount,orderRemark:e.orderRemark};r.push({...t,goodsList:n})}else{let e=r[t].goodsList.concat(n);e=e.map(e=>({...e,textColor:s})),r[t].goodsList=e}});const n={flatDataSource:t,orderDataSource:r,allOrderCodes:a};return n},Xa=a("25ca");var Ja={data(){return{fileList:[],dataSource:[]}},methods:{handleRemove(e,t){this.fileList=t},onChange(e,t){this.fileList=t},empty(){this.fileList=[],this.dataSource=[]},async submit(){this.dataSource=[],await this.fileList.map(e=>{this.readerFiles(e)}),setTimeout(()=>{this.getFlatDataSource()},500)},async readerFiles(e){let t=await new Promise(t=>{let a=new FileReader;a.readAsBinaryString(e.raw),a.onload=e=>{t(e.target.result)}}),a=Xa.read(t,{type:"binary",cellDates:!0}),r=a.Sheets[a.SheetNames[0]];this.getHeaderRow(r);const n=Xa.utils.sheet_to_json(r);this.dataSource.push(n)},getHeaderRow(e){const t=[],a=Xa.utils.decode_range(e["!ref"]);let r;const n=a.s.r;for(r=a.s.c;r<=a.e.c;++r){const a=e[Xa.utils.encode_cell({c:r,r:n})];let s="UNKNOWN "+r;a&&a.t&&(s=Xa.utils.format_cell(a)),t.push(s)}return t},setOneArrFormat(){const e=this.dataSource.reduce((e,t)=>e.concat(t),[]);return e},getFlatDataSource(){if(0===this.dataSource.length)return void this.$message.error("请先导入数据");const e=this.setOneArrFormat(),t=Pa(e),a=Ua(t);return this.$emit("onOk",a),a}}},Ma=Ja,Fa=(a("5e03"),Object(o["a"])(Ma,Ea,za,!1,null,"512e97da",null)),Va=Fa.exports,Ka=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"main-btn"},[e._v(" 第三步："),t("el-button",{staticClass:"main-btn1",attrs:{type:"success"},on:{click:e.onOk}},[e._v("导出excel")])],1),t("el-divider"),e._v(" 第四步： "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"order-sn",attrs:{size:"small",type:"info"},on:{click:e.exportSn}},[t("i",{staticClass:"el-icon-download"}),e._v("单号汇总")]),t("download-excel",{ref:"download-img",class:["export-img img"],attrs:{data:e.imgExport.data||[],name:e.imgExport.name}},[t("i",{staticClass:"el-icon-download"}),e._v("下载img ")]),e._l(e.downBtns,(function(a){return t("span",{key:a.value},[t("download-excel",{ref:"download",refInFor:!0,class:["export-img doOrder"],attrs:{data:e.orderExportObj[a.valKey]||[],name:`${e.fileName}做单--${a.label}-${e.timer}.xlsx`}},[t("i",{staticClass:"el-icon-download"}),e._v(" "+e._s(a.label)+" "),e._EXPORT_DATAS.doOrdersDataSource?t("span",[e._v(" （"+e._s(e._EXPORT_DATAS.doOrdersDataSource[a.valKey].length>0?"有":"无")+"） ")]):e._e()])],1)}))],2),t("div",{staticClass:"zdy-ipt"},[e._v(" 下载文件名: "),t("el-input",{staticStyle:{width:"240px","margin-right":"16px"},attrs:{size:"small",placeholder:"下载文件名"},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}}),e._v(" excel的索引： "),t("el-input",{staticStyle:{width:"60px"},attrs:{size:"small",placeholder:"开始索引,默认1"},model:{value:e.startIndex,callback:function(t){e.startIndex=t},expression:"startIndex"}})],1)],1)},qa=[];const Ha=e=>{const t=Object(_["chunk"])(e,4);let a="";return t.map(e=>{a=a+e.join(" ")+"\r\n"}),a},Ga=()=>{const e=new Date,t=e.getMonth()+1,a=t<10?"0"+t:t;let r=e.getFullYear()+"-"+a+"-"+e.getDate();return r},Za="<table>\n<tr >\n    <td></td>\n    </table>",Wa=({img:e,specStr:t})=>`<table border="1"  align="center" bgcolor="#e5e9f2">  \n    <tr align="center" valign="center">\n        <td  height=200 width=200 align="center" valign="center"> <img src="https:${e}" width="100" height="100" /></td>\n    </tr>\n    <tr align="center">\n        <td width="200">${t}</td>\n    </tr>       \n</table>`,Ya='<table  align="center" >\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n</table>'+Za,Qa='<table  align="center" >\n<colgroup>\n    <col span="1"style="">\n  </colgroup>\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n</table>'+Za,er=e=>{const t=Ga();return`<table border="1"  align="center" >\n    <colgroup>\n        <col span="1"style="">\n      </colgroup>\n    <tr align="center" valign="center">\n        <td  height=200 width=200 align="center" valign="center"  style="color:#fd0004;font-size: 72px;">${e}</td>\n    </tr>\n    <tr align="center">\n        <td>买家邮箱（${t}）</td>\n    </tr>\n    <tr align="center">\n        <td>买家</td>\n    </tr>\n    <tr align="center">\n        <td  >名字</td>\n    </tr>\n    <tr align="center">\n        <td>号码</td>\n    </tr>\n    <tr align="center">\n        <td>规格</td>\n    </tr>\n    <tr align="center">\n        <td>尺寸</td>\n    </tr>\n    <tr align="center">\n        <td>订单号</td>\n    </tr>\n    <tr align="center">\n    <td>订单备注</td>\n</tr>\n</table>`},tr=({textColor:e,img:t,DZbuyName:a,DZnumber:r,business:n,buyerEmail:s,spec:o,size:i,order_sn:l,orderRemark:c,sBuyColor:d=""})=>`<table border="1"  align="center"  bgcolor="#e5e9f2">\n        <colgroup>\n            <col span="1"style="">\n          </colgroup>\n        <tr align="center" valign="center">\n            <td  height=200 width=200 align="center" valign="center"> <img src="https:${t}" height="100" /></td>\n        </tr>\n        <tr align="center">\n            <td  >${s}</td>\n        </tr>\n        <tr align="center">\n            <td  style="background-color:${d||e}">${n}</td>\n        </tr>\n        <tr align="center">\n            <td  >${a}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:green">${r}</td>\n        </tr>\n        <tr align="center">\n            <td >${o}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:red">${i}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:${d?e:"blue"}">${"&nbsp;"+l}</td>\n        </tr>\n        <tr align="center">\n        <td>${c}</td>\n    </tr>\n    </table>`,ar=e=>{const t=or(e),a=Object(_["flatten"])(sr(t)),r=rr(a);return r},rr=e=>{const t=Object(_["chunk"])(e,4),a=[];return t.map(e=>{let t={};e.map((e,a)=>{const r=Object(_["map"])(e.sizeNum,"size_num_str").join("/");t["picture-picture-picture"+a]=Wa({img:e.imgUrl,specStr:r}),t[`empty${a}-`]=Ya}),a.push(t)}),a},nr=["S","M","L","XL","XXL","XXXL","12","14","16","18","20","22","24","26","28","30"],sr=e=>e.map(e=>{const t=e.sizeNum.sort((e,t)=>nr.indexOf(e.size)-nr.indexOf(t.size));return{imgUrl:e.imgUrl,sizeNum:t}}),or=e=>{const t=[];return e.map(e=>{const a=e.imgUrl,r=Object(_["findIndex"])(t,["imgUrl",a]),n=e.size,s=e.number;if(-1===r){const e=lr(n,s),r={imgUrl:a,sizeNum:[e]};t.push(r)}else ir(t[r],{size:n,number:s})}),t},ir=(e,{size:t,number:a})=>{const r=Object(_["findIndex"])(e.sizeNum,["size",t]);if(-1===r){const r=lr(t,a);e.sizeNum.push(r)}else e.sizeNum[r].number+=a,e.sizeNum[r].size_num_str=t+e.sizeNum[r].number},lr=(e,t)=>({size:e,number:t,size_num_str:e+t}),cr=(e,t="1")=>{const{_sameBuyerDataSource:a,_more230DataSource:r,_customizedDataSource_default:n,_nocustomizedDataSource:s,_examineDataSource_hasRemark:o,_examineDataSource:i}=e,l={_sameBuyerDataSource:ur(dr(a),t),_more230DataSource:ur(dr(r),t),_nocustomizedDataSource:ur(dr(s),t),_customizedDataSource_default:ur(dr(n),t),_examineDataSource_hasRemark:ur(dr(o),t),_examineDataSource:ur(dr(i),t)};return l},dr=e=>{const t=null===e||void 0===e?void 0:e.map(e=>e.goodsList);return Object(_["flatten"])(t)},ur=(e,t)=>{const a=Object(_["chunk"])(e,4),r=[];return a.map((e,a)=>{let n={left:er(t)};e.map((e,t)=>{n["data"+t]=tr({textColor:e.textColor,img:e.imgUrl,DZbuyName:"",DZnumber:"",business:e.buyerAccount,spec:e.spec,size:e.size,order_sn:e.orderCode,sBuyColor:e.sBuyColor||"",buyerEmail:e.buyerEmail,orderRemark:e.orderRemark}),n[`empty${t}-`]=Qa}),r.push(n),t++}),r},mr=JSON.parse(window.localStorage.getItem("__sys3-base")),pr=Object(_["cloneDeep"])(null===mr||void 0===mr?void 0:mr.btns),br=null===pr||void 0===pr?void 0:pr.map(e=>e.value),hr=Object(_["cloneDeep"])(br),gr=hr;var fr={props:{_EXPORT_DATAS:{type:Object,default:()=>{}}},data(){return{downBtns:(null===mr||void 0===mr?void 0:mr.btns)||[],checkAll:!1,checkedIds:gr,fileName:"",timer:"",startIndex:"1",imgExport:{data:[],name:""},orderExport:{data:[],name:""},orderExportObj:{}}},computed:{},methods:{onOk(){this._EXPORT_DATAS.allOrderCodes?(this.timer=Ga(),this.exportImg(this._EXPORT_DATAS.flatDataSource),this.exportOrders(this._EXPORT_DATAS.doOrdersDataSource),this.$message.success("导出成功，快去下载")):this.$message.error("请先导入数据")},exportOrders(){this.orderExportObj=cr(this._EXPORT_DATAS.doOrdersDataSource,this.startIndex)},exportImg(){this.imgExport.data=ar(this._EXPORT_DATAS.flatDataSource),this.imgExport.name=`${this.fileName||""}报货-${this.timer}.xlsx`},exportSn(){if(!this._EXPORT_DATAS.allOrderCodes)return;const e=Ha(this._EXPORT_DATAS.allOrderCodes),t=new Blob([e],{type:"text/plain;charset=utf-8"}),a=`${this.fileName||""}单号-${this.timer}.txt`;Object(Te["saveAs"])(t,""+a)},handleCheckAll(e){this.checkedIds=e?br:[],this.isIndeterminate=!1},handleChange(e){let t=e.length;this.checkAll=t===this.datas.length,this.isIndeterminate=t>0&&t<this.datas.length},empty(){this.orderExportObj={},this.orderExport.data=[],this.orderExport.name="",this.imgExport.data=[],this.imgExport.name=""}}},_r=fr,yr=(a("a6cc"),Object(o["a"])(_r,Ka,qa,!1,null,"4c58ce33",null)),vr=yr.exports,xr=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,visible:e.dialogVisible,title:"配置信息",width:"70%",height:"500px","before-close":e.onCancel},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-tabs",{staticClass:"demo-dynamic",attrs:{value:"customized"},on:{"tab-click":e.handleClick}},[t("el-tab-pane",{attrs:{label:`定制：需联系买家规格（${e.formData.rgSpec.length}）`,name:"customized"}},[t("SpecTable",{attrs:{data:e.formData.rgSpec},on:{submit:e.customizedSubmit}})],1),t("el-tab-pane",{attrs:{label:`不定制（${e.formData.ndzSpec.length}）`,name:"noCustomized"}},[t("SpecTable",{attrs:{data:e.formData.ndzSpec},on:{submit:e.noCustomizedSubmit}})],1),t("el-tab-pane",{attrs:{label:"规格",name:"btns"}},e._l(e.formData.btns,(function(a){return t("div",{key:a.value},[t("p",[e._v(e._s(a.label))])])})),0)],1)],1)},Sr=[],Dr=function(){var e=this,t=e._self._c;return t("div",[t("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:"400"}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t("el-table-column",{attrs:{prop:"value",label:"英文规格"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:a.row.isEdit,expression:"scope.row.isEdit"}],attrs:{type:"text",placeholder:"请输入英文规格"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!a.row.isEdit,expression:"!scope.row.isEdit"}]},[e._v(e._s(a.row.value))])]}}])}),t("el-table-column",{attrs:{prop:"label",label:"中文规格"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:a.row.isEdit,expression:"scope.row.isEdit"}],attrs:{type:"text",placeholder:"请输入中文规格"},model:{value:a.row.label,callback:function(t){e.$set(a.row,"label",t)},expression:"scope.row.label"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!a.row.isEdit,expression:"!scope.row.isEdit"}]},[e._v(e._s(a.row.label))])]}}])}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.isEdit?a.row.isEdit?t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.edit(a,!1)}}},[e._v("完成")]):e._e():t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.edit(a,!0)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.del(a)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"add-list"},[t("el-button",{attrs:{type:"info",icon:"el-icon-plus"},on:{click:function(t){return e.add()}}},[e._v("新增")]),t("el-button",{staticStyle:{"margin-left":"20%"},attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("保存")])],1)],1)},Or=[],Cr={props:["data"],watch:{data:{handler:"initData",immediate:!0}},data(){return{tableData:[]}},methods:{initData(e){this.tableData=e},submit(){const e=this.tableData.map(e=>{if(!Object(_["isEmpty"])(e.label)||!Object(_["isEmpty"])(e.value))return{label:e.label.trim(),value:e.value.trim()};this.$message.error("规则信息不能为空!")});console.log(e,"--_tableData"),this.$emit("submit",e)},add(){this.defaultState(),this.tableData.push({label:"",value:"",isEdit:!0}),setTimeout(()=>{this.$refs.table.bodyWrapper.scrollTop=9999},500)},edit(e,t){this.defaultState(),this.$set(this.tableData,e.$index,{...e.row,isEdit:t})},del(e){this.tableData.splice(e.$index,1)},defaultState(){this.tableData=this.tableData.map(e=>({...e,isEdit:!1}))}}},wr=Cr,kr=(a("39d2"),Object(o["a"])(wr,Dr,Or,!1,null,"9e297582",null)),Ar=kr.exports;const Er=JSON.parse(window.localStorage.getItem("__sys3-base"))||{};console.log(Object(_["isEmpty"])(Er)?Ra:Er.btns,44454);var zr={components:{SpecTable:Ar},props:["dialogVisible"],data(){return{formData:{ndzSpec:Object(_["isEmpty"])(Er)?$a:Er.ndzSpec,rgSpec:Object(_["isEmpty"])(Er)?Na:Er.rgSpec,money:Object(_["isEmpty"])(Er)?Ia:Er.money,btns:Object(_["isEmpty"])(Er)?Ra:Er.btns}}},methods:{handleClick(e,t){},onCancel(){this.$emit("onCancel")},customizedSubmit(e){console.log("查看定制规则======",e),this.formData.rgSpec=e,this.specLocalData()},noCustomizedSubmit(e){console.log("查看不定制规则======",e),this.formData.ndzSpec=e,this.specLocalData()},specLocalData(){const e=Object(_["findIndex"])(Ra,["value","sys3-examine_hasRemark"]);this.formData.btns[e].specs=this.getKeys(this.formData.rgSpec);const t=Object(_["findIndex"])(Ra,["value","sys3-noCustomized"]);this.formData.btns[t].specs=this.getKeys(this.formData.ndzSpec),window.localStorage.setItem("__sys3-base",JSON.stringify(this.formData)),this.$message.success("配置成功")},getKeys(e){return e.map(e=>e.value)}}},jr=zr,Nr=(a("92dd"),Object(o["a"])(jr,xr,Sr,!1,null,"784faacb",null)),$r=Nr.exports;const Ir=JSON.parse(window.localStorage.getItem("__sys3-base")),Lr=null===Ir||void 0===Ir?void 0:Ir.btns,Rr=({orderDataSource:e})=>{const t=[],a=[],r=[],n=[],s=[];return e.map(e=>{const o=Ba(),i=t.indexOf(e.buyerAccount);-1===i?(t.push(e.buyerAccount),r.push(e.orderCode)):(a.push(e.buyerAccount),n.push(r[i]),n.push(e.orderCode),s.push({code:r[i],sBuyColor:o}),s.push({code:e.orderCode,sBuyColor:o}),t.splice(i,1),r.splice(i,1))}),{moreCodesAndColor:Object(_["uniqBy"])(s,"code"),buyMoreOrderCodes:Object(_["uniq"])(n)}},Tr=({orderDataSource:e})=>{const t=({key:e,orderDataSource:t})=>{const a=Object(_["find"])(Lr,["value",e]),r=a.specs,n=[];return t.map(e=>{const t=Object(_["map"])(e.goodsList,"spec"),a=Object(_["uniq"])(t);let s=!Object(_["some"])(a,(function(e){return!Object(_["includes"])(r,e)}));s&&n.push(e.orderCode)}),n},a=t({key:"sys3-noCustomized",orderDataSource:e});return{noCustOrderCodes:Object(_["uniq"])(a)}},Br=({orderDataSource:e})=>{const t=({orderDataSource:e})=>{const t=Object(_["map"])(null===Ir||void 0===Ir?void 0:Ir.rgSpec,"value"),a=[];return e.map(e=>{const r=Object(_["map"])(e.goodsList,"spec"),n=Object(_["uniq"])(r);let s=Object(_["every"])(n,(function(e){return!Object(_["includes"])(t,e)}));s&&a.push(e.orderCode)}),a},a=t({orderDataSource:e});return{custDefaultOrderCodes:Object(_["uniq"])(a)}},Pr=({orderDataSource:e})=>{const t=[];return e.map(e=>{e.orderRemark&&t.push(e.orderCode)}),{examineHasRemarkCodes:Object(_["uniq"])(t)}},Ur=(JSON.parse(window.localStorage.getItem("__sys3-base")),e=>{const t=Object(_["cloneDeep"])(e),{moreCodesAndColor:a}=Rr({orderDataSource:t.orderDataSource}),r=Jr({codeColorArrs:a,_DATA_OBJ:t}),{noCustOrderCodes:n}=Tr({orderDataSource:t.orderDataSource}),s=Xr({codeArrs:n,_DATA_OBJ:t}),{custDefaultOrderCodes:o}=Br({orderDataSource:t.orderDataSource}),i=Xr({codeArrs:o,_DATA_OBJ:t}),{examineHasRemarkCodes:l}=Pr({orderDataSource:t.orderDataSource}),c=Xr({codeArrs:l,_DATA_OBJ:t}),d=t.orderDataSource,u={doOrdersDataSource:{_sameBuyerDataSource:r,_customizedDataSource_default:i,_nocustomizedDataSource:s,_examineDataSource_hasRemark:c,_examineDataSource:d},flatDataSource:t.flatDataSource,allOrderCodes:t.allOrderCodes};return u}),Xr=({codeArrs:e,_DATA_OBJ:t})=>{const a=[];return e.map(e=>{const r=Object(_["findIndex"])(t.orderDataSource,["orderCode",e]);-1!==r&&(a.push(t.orderDataSource[r]),t.orderDataSource.splice(r,1))}),a},Jr=({codeColorArrs:e,_DATA_OBJ:t})=>{const a=[];return e.map(e=>{const r=Object(_["findIndex"])(t.orderDataSource,["orderCode",e.code]);if(-1!==r){const n=t.orderDataSource[r];n.goodsList=n.goodsList.map(t=>({...t,sBuyColor:e.sBuyColor})),a.push(n),t.orderDataSource.splice(r,1)}}),a},Mr={flatDataSource:[{orderCode:"1662292138481449087671",size:"L",spec:"With name and number",number:1,imgUrl:"//img.fantaskycdn.com/071189fa405227d3de495d51e8adc8ab_100x.jpeg",orderRemark:"Hagi #10",buyerAccount:"sunky96@yahoo.com",buyerEmail:"sunky96@yahoo.com",buyerLiuyan:"留言"},{orderCode:"1395991138489286152387",size:"M",spec:"No",number:1,imgUrl:"//img.fantaskycdn.com/aaebeb7633faff6e99276e32e9880b5c_100x.jpeg",orderRemark:"",buyerAccount:"kasa_25@hotmail.com",buyerEmail:"kasa_25@hotmail.com",buyerLiuyan:""},{orderCode:"1395991138489286152387",size:"M",spec:"No",number:1,imgUrl:"//img.fantaskycdn.com/1eeacaaef4316da28d489bd67eb0e0ee_100x.jpeg",orderRemark:"",buyerAccount:"kasa_25@hotmail.com",buyerEmail:"kasa_25@hotmail.com",buyerLiuyan:""},{orderCode:"1395991138489286152387",size:"L",spec:"Other(Add In The Instruction)",number:1,imgUrl:"//img.fantaskycdn.com/03d7b847393bba665fe6ffc5ff6623a7_100x.png",orderRemark:"",buyerAccount:"kasa_25@hotmail.com",buyerEmail:"kasa_25@hotmail.com",buyerLiuyan:""},{orderCode:"1395991138583510800288",size:"S",spec:"No",number:1,imgUrl:"//img.fantaskycdn.com/03d7b847393bba665fe6ffc5ff6623a7_100x.png",orderRemark:"",buyerAccount:"m.kanji1@icloud.com",buyerEmail:"m.kanji1@icloud.com",buyerLiuyan:"留言"},{orderCode:"1395991138583510800288",size:"S",spec:"No",number:1,imgUrl:"//img.fantaskycdn.com/67677fcf7226a7c58409459742ceb9e6_100x.jpeg",orderRemark:"",buyerAccount:"m.kanji1@icloud.com",buyerEmail:"m.kanji1@icloud.com",buyerLiuyan:""},{orderCode:"1395991138623663291000",size:"L",spec:"Rüdiger #22",number:2,imgUrl:"//img.fantaskycdn.com/c00ff0a1f92bd0e2bbaf1a0c7718423d_100x.jpeg",orderRemark:"备注",buyerAccount:"andreas_krell@web.de",buyerEmail:"andreas_krell@web.de",buyerLiuyan:""}],orderDataSource:[{orderCode:"1662292138481449087671",buyerAccount:"sunky96@yahoo.com",orderRemark:"Hagi #10",goodsList:[{textColor:"#57e5da",spec:"With name and number",size:"L",number:1,imgUrl:"//img.fantaskycdn.com/071189fa405227d3de495d51e8adc8ab_100x.jpeg",orderCode:"1662292138481449087671",buyerAccount:"sunky96@yahoo.com",buyerEmail:"sunky96@yahoo.com",buyerLiuyan:"留言",orderRemark:"Hagi #10"}]},{orderCode:"1395991138489286152387",buyerAccount:"kasa_25@hotmail.com",orderRemark:"",goodsList:[{textColor:"#d595f3",spec:"No",size:"M",number:1,imgUrl:"//img.fantaskycdn.com/aaebeb7633faff6e99276e32e9880b5c_100x.jpeg",orderCode:"1395991138489286152387",buyerAccount:"kasa_25@hotmail.com",buyerEmail:"kasa_25@hotmail.com",buyerLiuyan:"",orderRemark:""},{textColor:"#d595f3",spec:"No",size:"M",number:1,imgUrl:"//img.fantaskycdn.com/1eeacaaef4316da28d489bd67eb0e0ee_100x.jpeg",orderCode:"1395991138489286152387",buyerAccount:"kasa_25@hotmail.com",buyerEmail:"kasa_25@hotmail.com",buyerLiuyan:"",orderRemark:""},{textColor:"#d595f3",spec:"Other(Add In The Instruction)",size:"L",number:1,imgUrl:"//img.fantaskycdn.com/03d7b847393bba665fe6ffc5ff6623a7_100x.png",orderCode:"1395991138489286152387",buyerAccount:"kasa_25@hotmail.com",buyerEmail:"kasa_25@hotmail.com",buyerLiuyan:"",orderRemark:""}]},{orderCode:"1395991138583510800288",buyerAccount:"m.kanji1@icloud.com",orderRemark:"",goodsList:[{textColor:"#a659a3",spec:"No",size:"S",number:1,imgUrl:"//img.fantaskycdn.com/03d7b847393bba665fe6ffc5ff6623a7_100x.png",orderCode:"1395991138583510800288",buyerAccount:"m.kanji1@icloud.com",buyerEmail:"m.kanji1@icloud.com",buyerLiuyan:"留言",orderRemark:""},{textColor:"#a659a3",spec:"No",size:"S",number:1,imgUrl:"//img.fantaskycdn.com/67677fcf7226a7c58409459742ceb9e6_100x.jpeg",orderCode:"1395991138583510800288",buyerAccount:"m.kanji1@icloud.com",buyerEmail:"m.kanji1@icloud.com",buyerLiuyan:"",orderRemark:""}]},{orderCode:"1395991138623663291000",buyerAccount:"andreas_krell@web.de",orderRemark:"备注",goodsList:[{textColor:"#81a622",spec:"Rüdiger #22",size:"L",number:1,imgUrl:"//img.fantaskycdn.com/c00ff0a1f92bd0e2bbaf1a0c7718423d_100x.jpeg",orderCode:"1395991138623663291000",buyerAccount:"andreas_krell@web.de",buyerEmail:"andreas_krell@web.de",buyerLiuyan:"",orderRemark:"备注"},{textColor:"#81a622",spec:"Rüdiger #22",size:"L",number:1,imgUrl:"//img.fantaskycdn.com/c00ff0a1f92bd0e2bbaf1a0c7718423d_100x.jpeg",orderCode:"1395991138623663291000",buyerAccount:"andreas_krell@web.de",buyerEmail:"andreas_krell@web.de",buyerLiuyan:"",orderRemark:"备注"}]}],allOrderCodes:["1662292138481449087671","1395991138489286152387","1395991138583510800288","1395991138623663291000"]},Fr=JSON.parse(window.localStorage.getItem("__sys3-base"))||{};var Vr={name:"Home",components:{Upload:Va,Goods:vr,Config:$r},mounted(){},data:()=>({configVisible:!!Object(_["isEmpty"])(Fr),completeDataSource:{}}),methods:{ttttest(){this.completeDataSource=Ur(Mr),console.log(this.completeDataSource,"转的数据")},getData(e){this.completeDataSource=Ur(e),this.$message({message:"汇总导入成功，快去下载",showClose:!0,type:"success",duration:1500,offset:10}),console.log(this.completeDataSource,"转的数据")},empty(){this.$refs.unploadRef.empty(),this.completeDataSource={},this.$refs.goodsRef.empty()},confCancle(){this.configVisible=!1,window.location.reload()}}},Kr=Vr,qr=(a("8bc1"),Object(o["a"])(Kr,ka,Aa,!1,null,"73e4e7e6",null)),Hr=(qr.exports,function(){var e=this,t=e._self._c;return t("div",{staticClass:"sys4-box"},[t("Config",{attrs:{dialogVisible:e.configVisible},on:{onOk:function(t){e.configVisible=!1},onCancel:e.confCancle}}),t("el-button",{staticClass:"conf-btn",on:{click:function(t){e.configVisible=!0}}},[e._v("规格金额配置")]),t("el-button",{staticClass:"empt-btn",attrs:{type:"warning"},on:{click:e.empty}},[e._v("清空全部")]),t("Upload",{ref:"unploadRef",on:{onOk:e.getData}}),"2"===e.step?t("Goods",{ref:"goodsRef",attrs:{fileName:e.fileName,startIndex:e.startIndex,_EXPORT_DATAS:e.completeDataSource}}):e._e(),t("div",{staticClass:"zdy-ipt"},[e._v(" 下载文件名: "),t("el-input",{staticStyle:{width:"240px","margin-right":"16px"},attrs:{clear:!0,size:"small",placeholder:"下载文件名"},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}}),e._v(" excel的索引： "),t("el-input",{staticStyle:{width:"60px"},attrs:{size:"small",placeholder:"开始索引,默认1"},model:{value:e.startIndex,callback:function(t){e.startIndex=t},expression:"startIndex"}})],1)],1)}),Gr=[],Zr=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"box-card"},[t("el-upload",{attrs:{action:"#","auto-upload":!1,"on-change":e.onChange,"on-remove":e.handleRemove,"file-list":e.fileList,multiple:"",accept:".xls,.xlsx"}},[e._v(" 第一步： "),t("el-button",{attrs:{type:"primary"}},[e._v("选择文件")])],1),t("div",{staticClass:"exp"},[e._v(" 第二步： "),t("el-button",{staticStyle:{width:"350px"},attrs:{type:"danger"},on:{click:e.submit}},[e._v("（选择文件"+e._s(e.fileList.length||0)+"个）-----导入-----（导入成功"+e._s(e.dataSource.length)+"个）")])],1)],1)},Wr=[];const Yr={"订单号":"orderCode","产品规格":"spec","商品尺寸":"size","产品总数":"number","商品图片网址":"imgUrl","订单备注":"orderRemark","买家账号":"buyerAccount","买家Email":"buyerEmail","买家留言":"buyerLiuyan"},Qr=[{value:"La Liga Patch",label:"西甲联赛"},{value:"UCL Patch",label:"欧洲冠军联赛"},{value:"EURO 2024 Patch",label:"欧洲足球锦标赛"},{value:"Serie A Patch",label:"意大利足球甲级联赛"},{value:"America's Cup Patch",label:"南美洲杯"},{value:"EPL Patch",label:"英格兰足球超级联赛"},{value:"Bundesliga Patch",label:"德国足球甲级联赛"},{value:"Ligue 1 Patch",label:"法国足球甲级联赛"}],en=[{value:"No",label:"不定制"},{value:"no",label:"不定制"},{value:"",label:"不定制"}],tn="230",an=e=>e.map(e=>e.value),rn=[{value:"sys4-sameBuyer",label:"同个买家下多个单",valKey:"_sameBuyerDataSource"},{value:"sys4-noCustomized",specs:an(en),label:"不定制",valKey:"_nocustomizedDataSource"},{value:"sys4-examine",label:"人工审核",valKey:"_examineDataSource"}],nn=JSON.parse(window.localStorage.getItem("__sys4-base")),sn=null===nn||void 0===nn?void 0:nn.patch,on=()=>{const e="#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0");return e},ln=e=>{const t=["Size","Specification","CUSTOM PATCH","Custom Patch","MODEL","Custom Items","Instruction"],a=[],r={},n=t.map(e=>e.toLowerCase().split(" ").map((e,t)=>0===t?e:e.charAt(0).toUpperCase()+e.slice(1)).join(""));n.forEach(e=>{r[e]=""}),t.forEach((t,r)=>{const s=e.indexOf(t);-1!==s&&a.push({keyword:n[r],index:s})}),a.sort((e,t)=>e.index-t.index);for(let s=0;s<a.length;s++){const o=a[s],i=s+1<a.length?a[s+1].index:e.length;let l=e.slice(o.index+t[n.indexOf(o.keyword)].length,i).trim();l=l.replace(":",""),r[o.keyword]=l}return r},cn=e=>{if(!e||"No"===e||"no"===e)return"";let t="";const a=Object(_["findIndex"])(sn,["value",e]);return t=-1===a?e:sn[a].label,t},dn=e=>"Suit"===e||"suit"===e?"套装":"Jacket"===e||"jacket"===e?"上衣":"Shorts"===e||"shorts"===e?"裤子":e,un=e=>"Adult"===e||"adult"===e?"大人":"Kids"===e||"kids"===e?"小孩":e,mn=e=>e.map(e=>{const t={};for(const a in e){const r=e[a],n=Yr[a];if("产品规格"===a)if(t["_cpggAllInfo"]=r,-1===r.indexOf("Size"))t["bdAndgg"]="",-1!==r.indexOf("MODEL")?(t["size"]=un(r.replace("MODEL:","")),t["spec"]="No"):(t["size"]=null,t["spec"]=r);else{const e=ln(r);t["size"]=e["size"],t["spec"]=e["customItems"],t["_customItems"]=cn(e["customPatch"]),t["_instruction"]=e["instruction"],t["_customPatch"]=cn(e["customPatch"]),t["_specification"]=dn(e["specification"]),t["bdAndgg"]=t["_customPatch"]||t["_specification"]}else n&&(t[n]=r)}return t}),pn=e=>{const t=Object(_["cloneDeep"])(e),a=[],r=[];t.map(e=>{const t=a.indexOf(e.orderCode),n=[],s=on();for(let a=0;a<e.number;a++)n.push({...e,textColor:s,spec:e.spec,size:e.size,number:1,imgUrl:e.imgUrl,orderCode:e.orderCode,buyerAccount:e.buyerAccount,buyerEmail:e.buyerEmail,buyerLiuyan:e.buyerLiuyan,orderRemark:e.orderRemark});if(-1===t){a.push(e.orderCode);const t={orderCode:e.orderCode,amount:e.amount,buyerAccount:e.buyerAccount,orderRemark:e.orderRemark};r.push({...t,goodsList:n})}else{let e=r[t].goodsList.concat(n);e=e.map(e=>({...e,textColor:s})),r[t].goodsList=e}});const n={flatDataSource:t,orderDataSource:r,allOrderCodes:a};return n},bn=a("25ca");var hn={data(){return{fileList:[],dataSource:[]}},methods:{handleRemove(e,t){this.fileList=t},onChange(e,t){this.fileList=t},empty(){this.fileList=[],this.dataSource=[]},async submit(){this.dataSource=[],await this.fileList.map(e=>{this.readerFiles(e)}),setTimeout(()=>{this.getFlatDataSource()},500)},async readerFiles(e){let t=await new Promise(t=>{let a=new FileReader;a.readAsBinaryString(e.raw),a.onload=e=>{t(e.target.result)}}),a=bn.read(t,{type:"binary",cellDates:!0}),r=a.Sheets[a.SheetNames[0]];this.getHeaderRow(r);const n=bn.utils.sheet_to_json(r);this.dataSource.push(n)},getHeaderRow(e){const t=[],a=bn.utils.decode_range(e["!ref"]);let r;const n=a.s.r;for(r=a.s.c;r<=a.e.c;++r){const a=e[bn.utils.encode_cell({c:r,r:n})];let s="UNKNOWN "+r;a&&a.t&&(s=bn.utils.format_cell(a)),t.push(s)}return t},setOneArrFormat(){const e=this.dataSource.reduce((e,t)=>e.concat(t),[]);return e},getFlatDataSource(){if(0===this.dataSource.length)return void this.$message.error("请先导入数据");const e=this.setOneArrFormat(),t=mn(e),a=pn(t);return console.log("结果》》》》》",a),this.$emit("onOk",a),a}}},gn=hn,fn=(a("035b"),Object(o["a"])(gn,Zr,Wr,!1,null,"e560c5fc",null)),_n=fn.exports,yn=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"main-btn"},[e._v(" 第三步："),t("el-button",{staticClass:"main-btn1",attrs:{type:"success"},on:{click:e.onOk}},[e._v("导出excel")])],1),t("el-divider"),e._v(" 第四步： "),"4"===e.curStep?t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticClass:"order-sn",attrs:{size:"small",type:"info"},on:{click:e.exportSn}},[t("i",{staticClass:"el-icon-download"}),e._v("单号汇总")]),t("download-excel",{ref:"download-img",class:["export-img img"],attrs:{data:e.imgExport.data||[],name:e.imgExport.name}},[t("i",{staticClass:"el-icon-download"}),e._v("下载img ")]),e._l(e.downBtns,(function(a){return t("span",{key:a.value},[t("download-excel",{ref:"download",refInFor:!0,class:["export-img doOrder"],attrs:{data:e.orderExportObj[a.valKey]||[],name:`${e.fileName}做单--${a.label}-${e.timer}.xlsx`}},[t("i",{staticClass:"el-icon-download"}),e._v(" "+e._s(a.label)+" "),e._EXPORT_DATAS.doOrdersDataSource?t("span",[e._v(" （"+e._s(e._EXPORT_DATAS.doOrdersDataSource[a.valKey].length>0?"有":"无")+"） ")]):e._e()])],1)}))],2):e._e()],1)},vn=[];const xn=e=>{const t=Object(_["chunk"])(e,4);let a="";return t.map(e=>{a=a+e.join(" ")+"\r\n"}),a},Sn=()=>{const e=new Date,t=e.getMonth()+1,a=t<10?"0"+t:t;let r=e.getFullYear()+"-"+a+"-"+e.getDate();return r},Dn="<table>\n<tr >\n    <td></td>\n    </table>",On=({img:e,specStr:t})=>`<table border="1"  align="center" bgcolor="#e5e9f2">  \n    <tr align="center" valign="center">\n        <td  height=200 width=200 align="center" valign="center"> <img src="https:${e}" width="100" height="100" /></td>\n    </tr>\n    <tr align="center">\n        <td width="200">${t}</td>\n    </tr>       \n</table>`,Cn='<table  align="center" >\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n</table>'+Dn,wn='<table  align="center" >\n<colgroup>\n    <col span="1"style="">\n  </colgroup>\n<tr align="center" valign="center">\n    <td > </td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n<tr align="center">\n    <td ></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n<tr align="center">\n    <td></td>\n</tr>\n</table>'+Dn,kn=e=>{const t=Sn();return`<table border="1"  align="center" >\n    <colgroup>\n        <col span="1"style="">\n      </colgroup>\n    <tr align="center" valign="center">\n        <td  height=200 width=200 align="center" valign="center"  style="color:#fd0004;font-size: 72px;">${e}</td>\n    </tr>\n    <tr align="center">\n        <td>买家邮箱（${t}）</td>\n    </tr>\n    <tr align="center">\n        <td>买家</td>\n    </tr>\n    <tr align="center">\n        <td  >名字</td>\n    </tr>\n    <tr align="center">\n        <td>号码</td>\n    </tr>\n    <tr align="center">\n        <td>备注(名字号码)</td>\n    </tr>\n    <tr align="center">\n        <td>补丁/规格</td>\n    </tr>\n    <tr align="center">\n        <td>尺寸</td>\n    </tr>\n    <tr align="center">\n        <td>订单号</td>\n    </tr>\n    <tr align="center">\n    <td>订单备注</td>\n</tr>\n</table>`},An=({textColor:e,img:t,bdAndgg:a,_instruction:r,DZnumber:n,business:s,buyerEmail:o,spec:i,size:l,order_sn:c,orderRemark:d,sBuyColor:u=""})=>`<table border="1"  align="center"  bgcolor="#e5e9f2">\n        <colgroup>\n            <col span="1"style="">\n          </colgroup>\n        <tr align="center" valign="center">\n            <td  height=200 width=200 align="center" valign="center"> <img src="https:${t}" height="100" /></td>\n        </tr>\n        <tr align="center">\n            <td  >${o}</td>\n        </tr>\n        <tr align="center">\n            <td  style="background-color:${u||e}">${s}</td>\n        </tr>\n        <tr align="center">\n            <td  >${i}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:green">${n}</td>\n        </tr>\n         <tr align="center">\n            <td style="color:green">${r}</td>\n        </tr>\n        <tr align="center">\n            <td >${a}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:red">${l}</td>\n        </tr>\n        <tr align="center">\n            <td style="color:${u?e:"blue"}">${"&nbsp;"+c}</td>\n        </tr>\n        <tr align="center">\n        <td>${d}</td>\n    </tr>\n    </table>`,En=e=>{const t=$n(e),a=Object(_["flatten"])(Nn(t)),r=zn(a);return r},zn=e=>{const t=Object(_["chunk"])(e,4),a=[];return t.map(e=>{let t={};e.map((e,a)=>{const r=Object(_["map"])(e.sizeNum,"size_num_str").join("/");t["picture-picture-picture"+a]=On({img:e.imgUrl,specStr:r}),t[`empty${a}-`]=Cn}),a.push(t)}),a},jn=["S","M","L","XL","XXL","XXXL","12","14","16","18","20","22","24","26","28","30"],Nn=e=>e.map(e=>{const t=e.sizeNum.sort((e,t)=>jn.indexOf(e.size)-jn.indexOf(t.size));return{imgUrl:e.imgUrl,sizeNum:t}}),$n=e=>{const t=[];return e.map(e=>{const a=e.imgUrl,r=Object(_["findIndex"])(t,["imgUrl",a]),n=e.size,s=e.number;if(-1===r){const e=Ln(n,s),r={imgUrl:a,sizeNum:[e]};t.push(r)}else In(t[r],{size:n,number:s})}),t},In=(e,{size:t,number:a})=>{const r=Object(_["findIndex"])(e.sizeNum,["size",t]);if(-1===r){const r=Ln(t,a);e.sizeNum.push(r)}else e.sizeNum[r].number+=a,e.sizeNum[r].size_num_str=t+e.sizeNum[r].number},Ln=(e,t)=>({size:e,number:t,size_num_str:e+t}),Rn=(e,t="1")=>{const{_sameBuyerDataSource:a,_nocustomizedDataSource:r,_examineDataSource:n}=e,s={_sameBuyerDataSource:Pn(Tn(a),t),_nocustomizedDataSource:Pn(Tn(r),t),_examineDataSource:Pn(Tn(n),t)};return s},Tn=e=>{const t=null===e||void 0===e?void 0:e.map(e=>e.goodsList);return Object(_["flatten"])(t)},Bn=e=>"No"===e||"no"===e?"":e,Pn=(e,t)=>{const a=Object(_["chunk"])(e,4),r=[];return a.map((e,a)=>{let n={left:kn(t)};e.map((e,t)=>{n["data"+t]=An({textColor:e.textColor,img:e.imgUrl,DZbuyName:"",DZnumber:"",bdAndgg:e.bdAndgg||"",_instruction:e._instruction||"",business:e.buyerAccount,spec:Bn(e.spec),size:e.size,order_sn:e.orderCode,sBuyColor:e.sBuyColor||"",buyerEmail:e.buyerEmail,orderRemark:e.orderRemark}),n[`empty${t}-`]=wn}),r.push(n),t++}),r},Un=JSON.parse(window.localStorage.getItem("__sys4-base")),Xn=Object(_["cloneDeep"])(null===Un||void 0===Un?void 0:Un.btns),Jn=null===Xn||void 0===Xn?void 0:Xn.map(e=>e.value),Mn=Object(_["cloneDeep"])(Jn),Fn=Mn;var Vn={props:{fileName:{type:String,default:""},startIndex:{type:String,default:"1"},_EXPORT_DATAS:{type:Object,default:()=>{}}},data(){return{downBtns:(null===Un||void 0===Un?void 0:Un.btns)||[],checkAll:!1,checkedIds:Fn,timer:"",imgExport:{data:[],name:""},orderExport:{data:[],name:""},orderExportObj:{},curStep:"3"}},computed:{},methods:{onOk(){this._EXPORT_DATAS.allOrderCodes?(this.timer=Sn(),this.exportImg(this._EXPORT_DATAS.flatDataSource),this.exportOrders(this._EXPORT_DATAS.doOrdersDataSource),this.$message.success("导出成功，快去下载"),this.curStep="4"):this.$message.error("请先导入数据")},exportOrders(){this.orderExportObj=Rn(this._EXPORT_DATAS.doOrdersDataSource,this.startIndex)},exportImg(){this.imgExport.data=En(this._EXPORT_DATAS.flatDataSource),this.imgExport.name=`${this.fileName||""}报货-${this.timer}.xlsx`},exportSn(){if(!this._EXPORT_DATAS.allOrderCodes)return;const e=xn(this._EXPORT_DATAS.allOrderCodes),t=new Blob([e],{type:"text/plain;charset=utf-8"}),a=`${this.fileName||""}单号-${this.timer}.txt`;Object(Te["saveAs"])(t,""+a)},handleCheckAll(e){this.checkedIds=e?Jn:[],this.isIndeterminate=!1},handleChange(e){let t=e.length;this.checkAll=t===this.datas.length,this.isIndeterminate=t>0&&t<this.datas.length},empty(){this.orderExportObj={},this.orderExport.data=[],this.orderExport.name="",this.imgExport.data=[],this.imgExport.name="",this.curStep="3"}}},Kn=Vn,qn=(a("bb48"),Object(o["a"])(Kn,yn,vn,!1,null,"ecdc9a72",null)),Hn=qn.exports,Gn=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,visible:e.dialogVisible,title:"配置信息",width:"70%",height:"500px","before-close":e.onCancel},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-tabs",{staticClass:"demo-dynamic",attrs:{value:"customized"},on:{"tab-click":e.handleClick}},[t("el-tab-pane",{attrs:{label:`补丁（${e.formData.patch.length}）`,name:"customized"}},[t("SpecTable",{attrs:{data:e.formData.patch},on:{submit:e.customizedSubmit}})],1),t("el-tab-pane",{attrs:{label:`不定制（${e.formData.ndzSpec.length}）`,name:"noCustomized"}},[t("SpecTable",{attrs:{data:e.formData.ndzSpec},on:{submit:e.noCustomizedSubmit}})],1),t("el-tab-pane",{attrs:{label:"规格",name:"btns"}},e._l(e.formData.btns,(function(a){return t("div",{key:a.value},[t("p",[e._v(e._s(a.label))])])})),0)],1)],1)},Zn=[],Wn=function(){var e=this,t=e._self._c;return t("div",[t("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:"400"}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t("el-table-column",{attrs:{prop:"value",label:"英文规格"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:a.row.isEdit,expression:"scope.row.isEdit"}],attrs:{type:"text",placeholder:"请输入英文规格"},model:{value:a.row.value,callback:function(t){e.$set(a.row,"value",t)},expression:"scope.row.value"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!a.row.isEdit,expression:"!scope.row.isEdit"}]},[e._v(e._s(a.row.value))])]}}])}),t("el-table-column",{attrs:{prop:"label",label:"中文规格"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-input",{directives:[{name:"show",rawName:"v-show",value:a.row.isEdit,expression:"scope.row.isEdit"}],attrs:{type:"text",placeholder:"请输入中文规格"},model:{value:a.row.label,callback:function(t){e.$set(a.row,"label",t)},expression:"scope.row.label"}}),t("span",{directives:[{name:"show",rawName:"v-show",value:!a.row.isEdit,expression:"!scope.row.isEdit"}]},[e._v(e._s(a.row.label))])]}}])}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.isEdit?a.row.isEdit?t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.edit(a,!1)}}},[e._v("完成")]):e._e():t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.edit(a,!0)}}},[e._v("编辑")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.del(a)}}},[e._v("删除")])]}}])})],1),t("div",{staticClass:"add-list"},[t("el-button",{attrs:{type:"info",icon:"el-icon-plus"},on:{click:function(t){return e.add()}}},[e._v("新增")]),t("el-button",{staticStyle:{"margin-left":"20%"},attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("保存")])],1)],1)},Yn=[],Qn={props:["data"],watch:{data:{handler:"initData",immediate:!0}},data(){return{tableData:[]}},methods:{initData(e){this.tableData=e},submit(){const e=this.tableData.map(e=>{if(!Object(_["isEmpty"])(e.label)||!Object(_["isEmpty"])(e.value))return{label:e.label.trim(),value:e.value.trim()};this.$message.error("规则信息不能为空!")});console.log(e,"--_tableData"),this.$emit("submit",e)},add(){this.defaultState(),this.tableData.push({label:"",value:"",isEdit:!0}),setTimeout(()=>{this.$refs.table.bodyWrapper.scrollTop=9999},500)},edit(e,t){this.defaultState(),this.$set(this.tableData,e.$index,{...e.row,isEdit:t})},del(e){this.tableData.splice(e.$index,1)},defaultState(){this.tableData=this.tableData.map(e=>({...e,isEdit:!1}))}}},es=Qn,ts=(a("f21a"),Object(o["a"])(es,Wn,Yn,!1,null,"2610a280",null)),as=ts.exports;const rs=JSON.parse(window.localStorage.getItem("__sys4-base"))||{};console.log(Object(_["isEmpty"])(rs)?rn:rs.btns,44454);var ns={components:{SpecTable:as},props:["dialogVisible"],data(){return{formData:{ndzSpec:Object(_["isEmpty"])(rs)?en:rs.ndzSpec,patch:Object(_["isEmpty"])(rs)?Qr:rs.patch,money:Object(_["isEmpty"])(rs)?tn:rs.money,btns:Object(_["isEmpty"])(rs)?rn:rs.btns}}},methods:{handleClick(e,t){},onCancel(){this.$emit("onCancel")},customizedSubmit(e){console.log("查看定制规则======",e),this.formData.patch=e,this.specLocalData()},noCustomizedSubmit(e){console.log("查看不定制规则======",e),this.formData.ndzSpec=e,this.specLocalData()},specLocalData(){const e=Object(_["findIndex"])(rn,["value","sys4-noCustomized"]);this.formData.btns[e].specs=this.getKeys(this.formData.ndzSpec),window.localStorage.setItem("__sys4-base",JSON.stringify(this.formData)),this.$message.success("配置成功")},getKeys(e){return e.map(e=>e.value)}}},ss=ns,os=(a("75e4"),Object(o["a"])(ss,Gn,Zn,!1,null,"0bd3cd65",null)),is=os.exports;const ls=JSON.parse(window.localStorage.getItem("__sys4-base")),cs=null===ls||void 0===ls?void 0:ls.btns,ds=({orderDataSource:e})=>{const t=[],a=[],r=[],n=[],s=[];return e.map(e=>{const o=on(),i=t.indexOf(e.buyerAccount);-1===i?(t.push(e.buyerAccount),r.push(e.orderCode)):(a.push(e.buyerAccount),n.push(r[i]),n.push(e.orderCode),s.push({code:r[i],sBuyColor:o}),s.push({code:e.orderCode,sBuyColor:o}),t.splice(i,1),r.splice(i,1))}),{moreCodesAndColor:Object(_["uniqBy"])(s,"code"),buyMoreOrderCodes:Object(_["uniq"])(n)}},us=({orderDataSource:e})=>{const t=({key:e,orderDataSource:t})=>{const a=Object(_["find"])(cs,["value",e]),r=a.specs,n=[];return t.map(e=>{const t=Object(_["map"])(e.goodsList,"spec"),a=Object(_["uniq"])(t);let s=!Object(_["some"])(a,(function(e){return!Object(_["includes"])(r,e)}));s&&n.push(e.orderCode)}),n},a=t({key:"sys4-noCustomized",orderDataSource:e});return{noCustOrderCodes:Object(_["uniq"])(a)}},ms=(JSON.parse(window.localStorage.getItem("__sys4-base")),e=>{const t=Object(_["cloneDeep"])(e),{moreCodesAndColor:a}=ds({orderDataSource:t.orderDataSource}),r=bs({codeColorArrs:a,_DATA_OBJ:t}),{noCustOrderCodes:n}=us({orderDataSource:t.orderDataSource}),s=ps({codeArrs:n,_DATA_OBJ:t}),o=t.orderDataSource,i={doOrdersDataSource:{_sameBuyerDataSource:r,_nocustomizedDataSource:s,_examineDataSource:o},flatDataSource:t.flatDataSource,allOrderCodes:t.allOrderCodes};return i}),ps=({codeArrs:e,_DATA_OBJ:t})=>{const a=[];return e.map(e=>{const r=Object(_["findIndex"])(t.orderDataSource,["orderCode",e]);-1!==r&&(a.push(t.orderDataSource[r]),t.orderDataSource.splice(r,1))}),a},bs=({codeColorArrs:e,_DATA_OBJ:t})=>{const a=[];return e.map(e=>{const r=Object(_["findIndex"])(t.orderDataSource,["orderCode",e.code]);if(-1!==r){const n=t.orderDataSource[r];n.goodsList=n.goodsList.map(t=>({...t,sBuyColor:e.sBuyColor})),a.push(n),t.orderDataSource.splice(r,1)}}),a},hs=JSON.parse(window.localStorage.getItem("__sys4-base"))||{};var gs={name:"Home",components:{Upload:_n,Goods:Hn,Config:is},mounted(){},data:()=>({configVisible:!!Object(_["isEmpty"])(hs),completeDataSource:{},step:"1",fileName:"",startIndex:"1"}),methods:{getData(e){this.completeDataSource=ms(e),this.$message({message:"汇总导入成功，快去下载",showClose:!0,type:"success",duration:1500,offset:10}),this.step="2",console.log(this.completeDataSource,"转的数据")},empty(){this.$refs.unploadRef.empty(),this.completeDataSource={},this.$refs.goodsRef.empty(),this.step="1"},confCancle(){this.configVisible=!1,window.location.reload()}}},fs=gs,_s=(a("fae9"),Object(o["a"])(fs,Hr,Gr,!1,null,"28b0536d",null)),ys=_s.exports,vs={name:"Home",components:{Lock:ot,Sys4Home:ys},mounted(){},data:()=>({islock:sessionStorage.getItem("isShopLock"),activeName:"first"}),methods:{login(e){this.islock=e},handleClick(){}}},xs=vs,Ss=(a("2169"),Object(o["a"])(xs,m,p,!1,null,"567668b2",null)),Ds=Ss.exports;r["default"].use(u["a"]);const Os=[{path:"/",name:"Home",component:Ds},{path:"/order",name:"Order",component:et}],Cs=new u["a"]({mode:"hash",base:"/",routes:Os});var ws=Cs,ks=a("2f62");r["default"].use(ks["a"]);var As=new ks["a"].Store({state:{},mutations:{},actions:{},modules:{}}),Es=(a("0fae"),a("5c96")),zs=a("f2d9");r["default"].config.productionTip=!1,r["default"].use(Es["Input"]),r["default"].use(Es["Button"]),r["default"].use(Es["Form"]),r["default"].use(Es["FormItem"]),r["default"].use(Es["Col"]),r["default"].use(Es["Row"]),r["default"].use(Es["Dialog"]),r["default"].use(Es["Checkbox"]),r["default"].use(Es["CheckboxGroup"]),r["default"].use(Es["Upload"]),r["default"].use(Es["Tabs"]),r["default"].use(Es["Divider"]),r["default"].use(Es["TabPane"]),r["default"].use(Es["Table"]),r["default"].use(Es["TableColumn"]),r["default"].use(Es["Card"]),r["default"].prototype.$message=Es["Message"],r["default"].component("downloadExcel",zs["a"]),new r["default"]({router:ws,store:As,render:e=>e(c)}).$mount("#app")},"5a1a":function(e,t,a){"use strict";a("6205")},"5b20":function(e,t,a){},"5e03":function(e,t,a){"use strict";a("9f4b")},"5e98":function(e,t,a){"use strict";a("0762")},6205:function(e,t,a){},"6dd2":function(e,t,a){},"6e3e":function(e,t,a){"use strict";a("4477")},"75a3":function(e,t,a){},"75e4":function(e,t,a){"use strict";a("75a3")},"7cee":function(e,t,a){"use strict";a("ea73")},"84f4":function(e,t,a){},"8b15":function(e,t,a){},"8bc1":function(e,t,a){"use strict";a("8b15")},"8d0e":function(e,t,a){},"92dd":function(e,t,a){"use strict";a("1405")},"9e78":function(e,t,a){"use strict";a("e958")},"9f4b":function(e,t,a){},a6cc:function(e,t,a){"use strict";a("3e30")},ae85:function(e,t,a){},bb48:function(e,t,a){"use strict";a("e4ef")},e488:function(e,t,a){"use strict";a("3310")},e4ef:function(e,t,a){},e52a:function(e,t,a){"use strict";a("ae85")},e958:function(e,t,a){},ea73:function(e,t,a){},f21a:function(e,t,a){"use strict";a("84f4")},f4da:function(e,t,a){},fae9:function(e,t,a){"use strict";a("0a70")},fcc0:function(e,t,a){"use strict";a("5b20")}});